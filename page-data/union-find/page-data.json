{"componentChunkName":"component---src-templates-post-js","path":"/union-find","result":{"data":{"markdownRemark":{"html":"<h3 id=\"table-of-contents\"><a href=\"#table-of-contents\" aria-label=\"table of contents permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Table of Contents</h3>\n<ol>\n<li><a href=\"#introduction\">Introduction</a></li>\n<li><a href=\"#setup\">Setup</a></li>\n<li><a href=\"#union\">Union</a></li>\n<li><a href=\"#analysis\">Analysis</a></li>\n<li><a href=\"#code\">Code</a></li>\n<li><a href=\"#conclusion\">Conclusion</a></li>\n</ol>\n<h3 id=\"introduction\"><a href=\"#introduction\" aria-label=\"introduction permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Introduction</h3>\n<p>In this post I'll talk about an algorithm called the union find algorithm. Union find can be used to figure out whether two elements belong to the same set. This set could represent a network of connected computers and you want to know whether two components in this network are connected. Or it can be used to detect cycles in a graph. For example, if two vertices are already in the same component and we proceed to connect them, we'd be creating a cycle. Before we dive in, let's define what it means to be connected. </p>\n<p><strong>Connected</strong> can be thought of as an equivalence relation:</p>\n<ul>\n<li>Reflexive: <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>A</mi></mrow><annotation encoding=\"application/x-tex\">A</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">A</span></span></span></span> is connected to itself.</li>\n<li>Symmetric: If <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>A</mi></mrow><annotation encoding=\"application/x-tex\">A</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">A</span></span></span></span> is connected to <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>B</mi></mrow><annotation encoding=\"application/x-tex\">B</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05017em;\">B</span></span></span></span>, it also means that <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>B</mi></mrow><annotation encoding=\"application/x-tex\">B</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05017em;\">B</span></span></span></span> is connected to <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>A</mi></mrow><annotation encoding=\"application/x-tex\">A</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">A</span></span></span></span>.</li>\n<li>Transitive: If <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>A</mi></mrow><annotation encoding=\"application/x-tex\">A</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">A</span></span></span></span> is connected to <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>B</mi></mrow><annotation encoding=\"application/x-tex\">B</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05017em;\">B</span></span></span></span>, and <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>B</mi></mrow><annotation encoding=\"application/x-tex\">B</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05017em;\">B</span></span></span></span> is connected to <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi></mrow><annotation encoding=\"application/x-tex\">C</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.07153em;\">C</span></span></span></span> then <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>A</mi></mrow><annotation encoding=\"application/x-tex\">A</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">A</span></span></span></span> is connected to <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi></mrow><annotation encoding=\"application/x-tex\">C</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.07153em;\">C</span></span></span></span>.</li>\n</ul>\n<h3 id=\"setup\"><a href=\"#setup\" aria-label=\"setup permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Setup</h3>\n<p>Before we begin, we need to create a bijection (or a one to one mapping) that translates a computer name to an integer value. This integer will be in the range <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mn>0</mn><mo separator=\"true\">,</mo><mi>N</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">[0, N)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span><span class=\"mclose\">)</span></span></span></span> where <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>N</mi></mrow><annotation encoding=\"application/x-tex\">N</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span></span></span></span> is the total number of computers in the network. Once we have this mapping, we can represent these computers using the assigned integer values. Now, we're ready to manipulate these integers. </p>\n<p>Next, we need to store our integers in an array since we need some sort of association among the objects themselves. Remember our aim is to figure out whether two objects are connected. Initially, each of our components is disconnected from every other component. So this is what our array looks like with say 12 components:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-cpptext\"><code class=\"language-cpptext\"> 0   1   2   3   4   5   6   7   8   9   10  11   \n___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___\n 0   1   2   3   4   5   6   7   8   9   10  11   </code></pre></div>\n<p>We want to manipulate our array in such a way that we'd be able to answer questions such as:</p>\n<ul>\n<li>Is the information represented in the structure correctly depict the connections?</li>\n<li>Can we <code class=\"language-cpptext\">union()</code> items - ie connect two components?</li>\n<li>Can we <code class=\"language-cpptext\">find()</code> the component number for the given component?</li>\n<li>Can we tell if two components are <code class=\"language-cpptext\">connected()</code>?</li>\n<li>Finally, can we get the <code class=\"language-cpptext\">count()</code> of the number of components present? </li>\n</ul>\n<h3 id=\"union\"><a href=\"#union\" aria-label=\"union permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Union</h3>\n<p>Ok, so we've got our array setup where each element is disconnected fom every other component. Initially, the number of components in our structures equals the number of objects (12 in our example). Let's say we want to union 2 objects by calling: </p>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cppcpp\"><code class=\"language-cppcpp\"><span class=\"token keyword\">union</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> p<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> q<span class=\"token punctuation\">)</span></code></pre></div>\n<p>function. Say, we call union with the following:</p>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cppcpp\"><code class=\"language-cppcpp\"><span class=\"token keyword\">union</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">9</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">union</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">union</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">union</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">union</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">union</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">union</span><span class=\"token punctuation\">(</span><span class=\"token number\">7</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">union</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">union</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">union</span><span class=\"token punctuation\">(</span><span class=\"token number\">11</span><span class=\"token punctuation\">,</span> <span class=\"token number\">8</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">union</span><span class=\"token punctuation\">(</span><span class=\"token number\">11</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">union</span><span class=\"token punctuation\">(</span><span class=\"token number\">11</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>In doing so, we make one element the child (or parent) of the other. The choice I made is arbitrary so I chose this convention: </p>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cppcpp\"><code class=\"language-cppcpp\"><span class=\"token keyword\">union</span><span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">,</span>q<span class=\"token punctuation\">)</span></code></pre></div>\n<p>would mean make <code class=\"language-cpptext\">q</code>'s root the child of <code class=\"language-cpptext\">p</code>'s root. So, if we perform <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>u</mi><mi>n</mi><mi>i</mi><mi>o</mi><mi>n</mi><mo stretchy=\"false\">(</mo><mn>4</mn><mo separator=\"true\">,</mo><mn>9</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">union(4,9)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">n</span><span class=\"mopen\">(</span><span class=\"mord\">4</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">9</span><span class=\"mclose\">)</span></span></span></span>, we make <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>4</mn></mrow><annotation encoding=\"application/x-tex\">4</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">4</span></span></span></span>'s root the child of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>9</mn></mrow><annotation encoding=\"application/x-tex\">9</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">9</span></span></span></span>'s root:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 642px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.102803738317753%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsSAAALEgHS3X78AAAAm0lEQVQY04WQWwuEIBSE/f+/sLAkMSJTwye7QMwygiLtwj58zOHcHI84jgMkpYTzPKuW/L+Y2iK6rsOyLFBKYZqmipSyPjQMA8ZxzMoa+znX932eI1rrjNi2DTFGeO+x7zuccwghgPnigrG1tsL6uq6Y5zkvoxpjMuK+b1zX9QXz5UuMW1h/nieboON2hyg3+UV7szccpksubPs+5/R8sFjv+nEAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Union-Find-1\"\n        title=\"Union-Find-1\"\n        src=\"/static/20a2d9f7f709b467d12bcefa4cc1a293/7a2d1/uf1.png\"\n        srcset=\"/static/20a2d9f7f709b467d12bcefa4cc1a293/27f03/uf1.png 173w,\n/static/20a2d9f7f709b467d12bcefa4cc1a293/376d0/uf1.png 345w,\n/static/20a2d9f7f709b467d12bcefa4cc1a293/7a2d1/uf1.png 642w\"\n        sizes=\"(max-width: 642px) 100vw, 642px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span> <a href=\"https://csacademy.com/app/graph_editor/\">Image Credit - Union Find</a></p>\n<p> To represent this in our array, we'll update <code class=\"language-cpptext\">arr[p]</code>'s root to the value of <code class=\"language-cpptext\">q</code>. This would mean:</p>\n<ul>\n<li>Find root of <code class=\"language-cpptext\">p</code> (in the example above it means find root of 4)</li>\n<li>And change the value at that root to <code class=\"language-cpptext\">q</code></li>\n</ul>\n<p> Therefore, we're going to do this:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-cpptext\"><code class=\"language-cpptext\">Update p&#39;s root to point to q&#39;s root \n                | \n 0   1   2   3   9   5   6   7   8   9   10  11   \n___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___\n 0   1   2   3   4   5   6   7   8   9   10  11  </code></pre></div>\n<p>To find p's root, we keep checking the array until the value at <code class=\"language-cpptext\">arr[index]</code> = <code class=\"language-cpptext\">index</code>. So, 4's root is 4 because <code class=\"language-cpptext\">arr[4]</code> = <code class=\"language-cpptext\">4</code>. 9's root is 9 because <code class=\"language-cpptext\">arr[9]</code> = <code class=\"language-cpptext\">9</code>. So we make 4's root the child of 9's root. For each subsequent union, I'm going to show the updated tree and the array:</p>\n<p><strong>union(1,0)</strong>:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 652px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 23.619631901840492%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsSAAALEgHS3X78AAAAvklEQVQY03WR2QqEMBRD+/+fJ7iLO4LivutLhgQKw8A8HG6b2za51LRti/u+xTiOou97LMuC53lwHIf20zQJ9tljHYYB8zzrzHmeqsbzPF28rgtVVSFJEqRpiqZp8L6vHgnDEFEUIc9zlGWJOI6F7/s677ougiCA4zgwWZbpQSbc910u27apUqMzU6zrqmR2TYqikDGTMnHXdTB0YDo79jdWp+E31Ji+rmtNQ417YpjKXv7ln257TMY/4BRW/wCk3nwR9S6sIAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Union-Find-2\"\n        title=\"Union-Find-2\"\n        src=\"/static/a94f50d2e09aefee612d5690b582b5fd/1241b/uf2.png\"\n        srcset=\"/static/a94f50d2e09aefee612d5690b582b5fd/27f03/uf2.png 173w,\n/static/a94f50d2e09aefee612d5690b582b5fd/376d0/uf2.png 345w,\n/static/a94f50d2e09aefee612d5690b582b5fd/1241b/uf2.png 652w\"\n        sizes=\"(max-width: 652px) 100vw, 652px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span> <a href=\"https://csacademy.com/app/graph_editor/\">Image Credit - Union Find</a></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-cpptext\"><code class=\"language-cpptext\"> 0   0   2   3   9   5   6   7   8   9   10  11   \n___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___\n 0   1   2   3   4   5   6   7   8   9   10  11   </code></pre></div>\n<p><strong>union(5, 6)</strong>:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 652px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 32.36196319018405%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsSAAALEgHS3X78AAAAvElEQVQY04WQxw6EMAxE8/+fSG+B0AQXqkCDxivvRlz28JTE49hjm3VdQfZ9x7ZtAu9+jKcfU1Q7jkPg3WRZhrIsJbAsC4IgQJqmSJJE3vphGAYwlxrPMAwRRZHkEcadczBVVaGua5znKQ66rsM4juj7/uuYBadpko/U27YViqIQ2CDP809BBuhQ7bOwomOpwziO5U3tvm9Ya4Xrun4jz/MM4u/wjTpsmkbWoM05HaGuuUYX6i//H+9cv/kDh/vKiQwqdY0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Union-Find-3\"\n        title=\"Union-Find-3\"\n        src=\"/static/4fb35cc85afe2f778a9a22c20fdda4c3/1241b/uf3.png\"\n        srcset=\"/static/4fb35cc85afe2f778a9a22c20fdda4c3/27f03/uf3.png 173w,\n/static/4fb35cc85afe2f778a9a22c20fdda4c3/376d0/uf3.png 345w,\n/static/4fb35cc85afe2f778a9a22c20fdda4c3/1241b/uf3.png 652w\"\n        sizes=\"(max-width: 652px) 100vw, 652px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span> <a href=\"https://csacademy.com/app/graph_editor/\">Image Credit - Union Find</a></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-cpptext\"><code class=\"language-cpptext\"> 0   0   2   3   9   6   6   7   8   9   10  11   \n___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___\n 0   1   2   3   4   5   6   7   8   9   10  11   </code></pre></div>\n<p><strong>union(5, 10)</strong>:</p>\n<p>This is an interesting one, we usually make p's root the child of q's root. That would mean make 5's root, which is 6, the child of 10's root which is 10. BUT, this is inefficient because we're making a larger tree the child of a smaller tree. This would imply that we change more entries in the array (when we change the array to point to new root). So, as a rule:</p>\n<ul>\n<li>During union operation, make smaller tree the child of the larger tree. </li>\n</ul>\n<p>Keeping that in mind, we're going to make 10's root, the child of 5's root because 10's tree only has 1 element (which is 10 itself) while 5's tree has 2 elements (6 and 5).</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 655px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 33.74045801526717%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsSAAALEgHS3X78AAAA2ElEQVQoz3VRyQrFMAjM/39foSuUFrrRje7bwTIDlhDeO4hRx3GM5jxPOY5D4F1D/l/Nxak3y7J8wbqusm0bzQbBkNv3/au5OLzhTZ7ncl2XgDgMQ0HseZ7M80wAaiDyfV/iOJYsy+iBCYKARNM0SRRFMgyDmKqq5L5vNiEBor7vGYMQvq5rEnRdJ+M4Ete2raRpSgzEFEXBXipU2VADwwD9H6jG9CRJSPQ8D+sggUJ47ePKupr+lW3IN01DxWVZcjUdhD4otG/Ao4D51yVd1arAHqab2Ad8AdsEGIB92neWAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Union-Find-4\"\n        title=\"Union-Find-4\"\n        src=\"/static/c06b3eb24f2e7cba224aabe746b2b44e/d2c1d/uf4.png\"\n        srcset=\"/static/c06b3eb24f2e7cba224aabe746b2b44e/27f03/uf4.png 173w,\n/static/c06b3eb24f2e7cba224aabe746b2b44e/376d0/uf4.png 345w,\n/static/c06b3eb24f2e7cba224aabe746b2b44e/d2c1d/uf4.png 655w\"\n        sizes=\"(max-width: 655px) 100vw, 655px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span> <a href=\"https://csacademy.com/app/graph_editor/\">Image Credit - Union Find</a></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-cpptext\"><code class=\"language-cpptext\"> 0   0   2   3   9   6   6   7   8   9   6  11   \n___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___\n 0   1   2   3   4   5   6   7   8   9   10  11  </code></pre></div>\n<p>With the few examples above, we've summarized the rules required for union find:</p>\n<ul>\n<li>During union operation, make smaller tree the child of the larger tree.</li>\n<li>If both trees have same number of elements, Find root of <code class=\"language-cpptext\">p</code> and change the value at that root to <code class=\"language-cpptext\">q</code></li>\n</ul>\n<p>If you go through all the union operations, your tree and array would look like this at the end:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 599px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.09682804674458%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAABX0lEQVQoz42TbauCQBCF/f+/qq+CQgQRqJVZVvZilOVLRRPPwMje4l7uh2HWnZlzzp5dvbZt5b/RNI2Gu3a/yd5fw5+DbnRdJ/f7/UdvD/jbkDUyaGFAh8NB1uv1t0JjMwZ3kKBelqXGdruVNE0lz3MZDocSBMGXHarwcrlIXddyvV6V+Xg8ymq1ksViIVmWqRJAqNHPN7XBYKB7COgBb7ebJEkik8lEQVCx2Wx6EuLxeGi8Xi/Z7/eyXC6FORSi2E6iR7ZCFEVSVVU/7NpAM8BFUch8PldF5/NZZ6bTqdphKj3kx3GsBbKxuWY/n09V7vu+KoPwdDopOKcirNfDIzY45ng8VpWfoKiZzWYadsv0499ut1MyfIdIAfHBlOKnATLIccIw1B4IUQgJay6KjKDRaKS9HjfLAhUYDqMBktkHDDVkvKSGEHtGzJGxQZ+NXYD79tzHapdkf4b7Xj973tLSkhpKsSWHAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Union-Find-11\"\n        title=\"Union-Find-11\"\n        src=\"/static/8a1ae69f834ae789fa6a6a22799cd620/3b5e3/uf11.png\"\n        srcset=\"/static/8a1ae69f834ae789fa6a6a22799cd620/27f03/uf11.png 173w,\n/static/8a1ae69f834ae789fa6a6a22799cd620/376d0/uf11.png 345w,\n/static/8a1ae69f834ae789fa6a6a22799cd620/3b5e3/uf11.png 599w\"\n        sizes=\"(max-width: 599px) 100vw, 599px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span> <a href=\"https://csacademy.com/app/graph_editor/\">Image Credit - Union Find</a></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-cpptext\"><code class=\"language-cpptext\">  9   0   9   9   9   6   9   0   0   9   6   8   \n ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___\n  0   1   2   3   4   5   6   7   8   9   10  11  </code></pre></div>\n<p>Notice the final connections array above: you'd expect every entry to be <code class=\"language-cpptext\">9</code> since 9 is the root of every object. However, since this is quick union, we are not going to determine the top level root for each object. This would make our <code class=\"language-cpptext\">find</code> operation a bit expensive. For example, if we want to see whether 5 and 11 are in the same component, we'll go through these steps until <code class=\"language-cpptext\">arr[index] = index</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-cpptext\"><code class=\"language-cpptext\">//For 5\narr[5] = 6\narr[6] = 9\narr[9] = 9\n\n\n//For 11\narr[11] = 8\narr[8] = 0\narr[0] = 9\narr[9] = 9</code></pre></div>\n<p>Since roots of 5 and 11 are the same, as expected, they belong to the same component.</p>\n<h3 id=\"analysis\"><a href=\"#analysis\" aria-label=\"analysis permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Analysis</h3>\n<p>The algorithm we discussed above is formally called <strong>weighted quick union</strong>. </p>\n<ul>\n<li>Weighted: because we check the weights of the two roots before we unionize. This allows us to change fewest possible entries in the array</li>\n<li>Quick union: because the union operation is fast: all we need to do is update one array entry</li>\n</ul>\n<p>As a result, the depth of a tree generated using WQU is at most <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>l</mi><mi>o</mi><mi>g</mi><mo stretchy=\"false\">(</mo><mi>N</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">log(N)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">g</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span><span class=\"mclose\">)</span></span></span></span> due to which our <code class=\"language-cpptext\">Union</code> and <code class=\"language-cpptext\">Find</code> would take <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>l</mi><mi>o</mi><mi>g</mi><mi>N</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(logN)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span><span class=\"mclose\">)</span></span></span></span> time.</p>\n<h3 id=\"code\"><a href=\"#code\" aria-label=\"code permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Code</h3>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre style=\"counter-reset: linenumber 0\" class=\"language-cppcpp line-numbers\"><code class=\"language-cppcpp\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">UF</span><span class=\"token punctuation\">{</span>\n<span class=\"token keyword\">private</span><span class=\"token operator\">:</span>\n    vector<span class=\"token operator\">&lt;</span><span class=\"token keyword\">int</span><span class=\"token operator\">></span> connectionsArray<span class=\"token punctuation\">;</span>\n    vector<span class=\"token operator\">&lt;</span><span class=\"token keyword\">int</span><span class=\"token operator\">></span> children<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">int</span> numberOfSites<span class=\"token punctuation\">;</span>\n    \n<span class=\"token keyword\">public</span><span class=\"token operator\">:</span>\n    <span class=\"token function\">UF</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">Union</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">int</span> <span class=\"token function\">FindRoot</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">Unionize</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">PrintAllVectors</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n\n<span class=\"token comment\">/// Constructor that takes in the number of sites</span>\n<span class=\"token comment\">/// @param num number of sites</span>\nUF<span class=\"token operator\">::</span><span class=\"token function\">UF</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> num<span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> <span class=\"token function\">numberOfSites</span><span class=\"token punctuation\">(</span>num<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> numberOfSites<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        connectionsArray<span class=\"token punctuation\">.</span><span class=\"token function\">push_back</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    children<span class=\"token punctuation\">.</span><span class=\"token function\">resize</span><span class=\"token punctuation\">(</span>numberOfSites<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/// Function that'll be called by the client with parent and child</span>\n<span class=\"token comment\">/// @param child integer that is to be designated as child</span>\n<span class=\"token comment\">/// @param parent integer that is to be designated as parent</span>\n<span class=\"token keyword\">void</span> UF<span class=\"token operator\">::</span><span class=\"token function\">Union</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> child<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> parent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">int</span> childRoot <span class=\"token operator\">=</span> <span class=\"token function\">FindRoot</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">int</span> parentRoot <span class=\"token operator\">=</span> <span class=\"token function\">FindRoot</span><span class=\"token punctuation\">(</span>parent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token comment\">//If the two don't already belong to the same component</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>childRoot <span class=\"token operator\">!=</span> parentRoot<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>children<span class=\"token punctuation\">[</span>childRoot<span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> children<span class=\"token punctuation\">[</span>parentRoot<span class=\"token punctuation\">]</span> <span class=\"token operator\">||</span> children<span class=\"token punctuation\">[</span>childRoot<span class=\"token punctuation\">]</span> <span class=\"token operator\">&lt;</span> children<span class=\"token punctuation\">[</span>parentRoot<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n            <span class=\"token comment\">//Same number of children in both roots, make childRoot the child of parentRoot</span>\n            <span class=\"token function\">Unionize</span><span class=\"token punctuation\">(</span>parentRoot<span class=\"token punctuation\">,</span> childRoot<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token function\">Unionize</span><span class=\"token punctuation\">(</span>childRoot<span class=\"token punctuation\">,</span> parentRoot<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n        cout <span class=\"token operator\">&lt;&lt;</span> child <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\" and \"</span> <span class=\"token operator\">&lt;&lt;</span> parent <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\" are part of the same component with root: \"</span> <span class=\"token operator\">&lt;&lt;</span> childRoot <span class=\"token operator\">&lt;&lt;</span> endl<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/// Function to find the root for the items being unioned</span>\n<span class=\"token comment\">/// @param r The item being unioned</span>\n<span class=\"token keyword\">int</span> UF<span class=\"token operator\">::</span><span class=\"token function\">FindRoot</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> r<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>connectionsArray<span class=\"token punctuation\">[</span>r<span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> r<span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n        r <span class=\"token operator\">=</span> connectionsArray<span class=\"token punctuation\">[</span>r<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    \n    <span class=\"token keyword\">return</span> r<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/// Function to actually perform the union operation</span>\n<span class=\"token comment\">/// @param parent integer being designated as parent</span>\n<span class=\"token comment\">/// @param child integer being designated as child</span>\n<span class=\"token keyword\">void</span> UF<span class=\"token operator\">::</span><span class=\"token function\">Unionize</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> parent<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> child<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    connectionsArray<span class=\"token punctuation\">[</span>child<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> parent<span class=\"token punctuation\">;</span>\n    children<span class=\"token punctuation\">[</span>parent<span class=\"token punctuation\">]</span> <span class=\"token operator\">+=</span> children<span class=\"token punctuation\">[</span>child<span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/// Function to print vectors</span>\n<span class=\"token keyword\">void</span> UF<span class=\"token operator\">::</span><span class=\"token function\">PrintAllVectors</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    cout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"Connections Array: \"</span> <span class=\"token operator\">&lt;&lt;</span> endl<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">auto</span> i <span class=\"token operator\">:</span> connectionsArray<span class=\"token punctuation\">)</span>\n        cout <span class=\"token operator\">&lt;&lt;</span> i <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\" \"</span><span class=\"token punctuation\">;</span>\n    cout <span class=\"token operator\">&lt;&lt;</span> endl<span class=\"token punctuation\">;</span>\n    cout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"Children array: \"</span> <span class=\"token operator\">&lt;&lt;</span> endl<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">auto</span> i <span class=\"token operator\">:</span> children<span class=\"token punctuation\">)</span>\n        cout <span class=\"token operator\">&lt;&lt;</span> i <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\" \"</span><span class=\"token punctuation\">;</span>\n    cout <span class=\"token operator\">&lt;&lt;</span> endl<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>On line 16, we define our constructor that takes in the number of objects we're about to specify:</p>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre style=\"counter-reset: linenumber 15\" class=\"language-cppcpp line-numbers\"><code class=\"language-cppcpp\"><span class=\"token comment\">/// Constructor that takes in the number of sites</span>\n<span class=\"token comment\">/// @param num number of sites</span>\nUF<span class=\"token operator\">::</span><span class=\"token function\">UF</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> num<span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> <span class=\"token function\">numberOfSites</span><span class=\"token punctuation\">(</span>num<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> numberOfSites<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        connectionsArray<span class=\"token punctuation\">.</span><span class=\"token function\">push_back</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    children<span class=\"token punctuation\">.</span><span class=\"token function\">resize</span><span class=\"token punctuation\">(</span>numberOfSites<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>This constructor then initializes the connections array with value <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span> till <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>N</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">N - 1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.76666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> where <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>N</mi></mrow><annotation encoding=\"application/x-tex\">N</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span></span></span></span> is the number of objects. This connections array signifies, initially, that each site is connected to itself. The constructor also initializes the <code class=\"language-cpptext\">children</code> array to all <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span>s since initially each site has <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span> children.</p>\n<p>Next, we're ready to perform union operations on pairs of sites. Let's start with this union operation: </p>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cppcpp\"><code class=\"language-cppcpp\"><span class=\"token function\">Union</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token number\">9</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p> where child is <code class=\"language-cpptext\">4</code> and parent <code class=\"language-cpptext\">9</code>:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 642px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.102803738317753%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsSAAALEgHS3X78AAAAm0lEQVQY04WQWwuEIBSE/f+/sLAkMSJTwye7QMwygiLtwj58zOHcHI84jgMkpYTzPKuW/L+Y2iK6rsOyLFBKYZqmipSyPjQMA8ZxzMoa+znX932eI1rrjNi2DTFGeO+x7zuccwghgPnigrG1tsL6uq6Y5zkvoxpjMuK+b1zX9QXz5UuMW1h/nieboON2hyg3+UV7szccpksubPs+5/R8sFjv+nEAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Union-Find-1\"\n        title=\"Union-Find-1\"\n        src=\"/static/20a2d9f7f709b467d12bcefa4cc1a293/7a2d1/uf1.png\"\n        srcset=\"/static/20a2d9f7f709b467d12bcefa4cc1a293/27f03/uf1.png 173w,\n/static/20a2d9f7f709b467d12bcefa4cc1a293/376d0/uf1.png 345w,\n/static/20a2d9f7f709b467d12bcefa4cc1a293/7a2d1/uf1.png 642w\"\n        sizes=\"(max-width: 642px) 100vw, 642px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span> <a href=\"https://csacademy.com/app/graph_editor/\">Image Credit - Union Find</a></p>\n<p>Here's the function called for performing the union operation:</p>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre style=\"counter-reset: linenumber 25\" class=\"language-cppcpp line-numbers\"><code class=\"language-cppcpp\"><span class=\"token comment\">/// Function that'll be called by the client with parent and child</span>\n<span class=\"token comment\">/// @param child integer that is to be designated as child</span>\n<span class=\"token comment\">/// @param parent integer that is to be designated as parent</span>\n<span class=\"token keyword\">void</span> UF<span class=\"token operator\">::</span><span class=\"token function\">Union</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> child<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> parent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">int</span> childRoot <span class=\"token operator\">=</span> <span class=\"token function\">FindRoot</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">int</span> parentRoot <span class=\"token operator\">=</span> <span class=\"token function\">FindRoot</span><span class=\"token punctuation\">(</span>parent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token comment\">//If the two don't already belong to the same component</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>childRoot <span class=\"token operator\">!=</span> parentRoot<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>children<span class=\"token punctuation\">[</span>childRoot<span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> children<span class=\"token punctuation\">[</span>parentRoot<span class=\"token punctuation\">]</span> <span class=\"token operator\">||</span> children<span class=\"token punctuation\">[</span>childRoot<span class=\"token punctuation\">]</span> <span class=\"token operator\">&lt;</span> children<span class=\"token punctuation\">[</span>parentRoot<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n            <span class=\"token comment\">//Same number of children in both roots, make childRoot the child of parentRoot</span>\n            <span class=\"token function\">Unionize</span><span class=\"token punctuation\">(</span>parentRoot<span class=\"token punctuation\">,</span> childRoot<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token function\">Unionize</span><span class=\"token punctuation\">(</span>childRoot<span class=\"token punctuation\">,</span> parentRoot<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n        cout <span class=\"token operator\">&lt;&lt;</span> child <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\" and \"</span> <span class=\"token operator\">&lt;&lt;</span> parent <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\" are part of the same component with root: \"</span> <span class=\"token operator\">&lt;&lt;</span> childRoot <span class=\"token operator\">&lt;&lt;</span> endl<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>The first thing we do in this function is to check whether the <code class=\"language-cpptext\">childRoot</code> and <code class=\"language-cpptext\">parentRoot</code> are the same. Notice, we're not checking whether the chlid and the parent are the same, but the root of the child and root of the parent. To find that root, we call the function called <code class=\"language-cpptext\">FindRoot</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre style=\"counter-reset: linenumber 45\" class=\"language-cppcpp line-numbers\"><code class=\"language-cppcpp\"><span class=\"token comment\">/// Function to find the root for the items being unioned</span>\n<span class=\"token comment\">/// @param r The item being unioned</span>\n<span class=\"token keyword\">int</span> UF<span class=\"token operator\">::</span><span class=\"token function\">FindRoot</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> r<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>connectionsArray<span class=\"token punctuation\">[</span>r<span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> r<span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n        r <span class=\"token operator\">=</span> connectionsArray<span class=\"token punctuation\">[</span>r<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    \n    <span class=\"token keyword\">return</span> r<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>This function goes through the <code class=\"language-cpptext\">connectionsArray</code> until the value at <code class=\"language-cpptext\">connectionsArray[item]</code> = <code class=\"language-cpptext\">item</code>. If so, return the root. Once we get our roots, back, we check if the roots are the same. If so, the items we're unionizing are already children of the same root so no need to unionize. If not, we then check to see which one of the two (childRoot or parentRoot) has more children. If one has more children, we make it the parent. If both are same, we make childRoot the child of parentRoot. This is the <strong>weighted</strong> part of WQU. Once that is determined, we call the <code class=\"language-cpptext\">Unionize</code> function:</p>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre style=\"counter-reset: linenumber 57\" class=\"language-cppcpp line-numbers\"><code class=\"language-cppcpp\"><span class=\"token comment\">/// Function to actually perform the union operation</span>\n<span class=\"token comment\">/// @param parent integer being designated as parent</span>\n<span class=\"token comment\">/// @param child integer being designated as child</span>\n<span class=\"token keyword\">void</span> UF<span class=\"token operator\">::</span><span class=\"token function\">Unionize</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> parent<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> child<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    connectionsArray<span class=\"token punctuation\">[</span>child<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> parent<span class=\"token punctuation\">;</span>\n    children<span class=\"token punctuation\">[</span>parent<span class=\"token punctuation\">]</span> <span class=\"token operator\">+=</span> children<span class=\"token punctuation\">[</span>child<span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>that makes the child to parent connection by changing values in the <code class=\"language-cpptext\">connectionsArray</code> and also updates the number of children for the parent in the <code class=\"language-cpptext\">children</code> array. </p>\n<p>Once we're done with all the union operations, this is what our <code class=\"language-cpptext\">connectionsArray</code> and <code class=\"language-cpptext\">children</code> array would look like:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-cpptext\"><code class=\"language-cpptext\">Connections Array: \n9 0 9 9 9 6 9 0 0 9 6 8 \nChildren array: \n4 0 0 0 0 0 2 0 1 11 0 0 </code></pre></div>\n<p>Notice how <code class=\"language-cpptext\">children[9]</code> shows <code class=\"language-cpptext\">11</code> which means every site's root is <code class=\"language-cpptext\">9</code>. </p>\n<p>If you notice, we haven't addressed the main reason we wrote this entire <code class=\"language-cpptext\">UnionFind</code> class: to check if two sites are part of the same component. Or if two vertices in a graph are already connected. We don't need a new function for it because we've already got one for it: <code class=\"language-cpptext\">FindRoot(int r)</code>. Our client can call this function for the two sites they're interested in. If <code class=\"language-cpptext\">FindRoot(int r)</code> returns the same root for both, then the sites are connected, otherwise they're not.</p>\n<h3 id=\"conclusion\"><a href=\"#conclusion\" aria-label=\"conclusion permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Conclusion</h3>\n<p>WQU is an efficient method to determine connectivity among objects. We'll see it in action when we talk about graph algorithms.  </p>","timeToRead":10,"excerpt":"Table of Contents Introduction Setup Union Analysis Code Conclusion Introduction In this post I'll talk about an algorithm called the union…","frontmatter":{"title":"Union Find","date":"2020-03-06T00:00:00.000Z","categories":["Graphs"],"extract":"Analysis of the Union Find algorithm","thumbnail":"/post-images/union-find.png","tags":["C++","General Algorithms"]},"fields":{"slug":"/union-find","date":"March 06, 2020"}}},"pageContext":{"slug":"/union-find","nexttitle":"Undirected Graphs Breadth First Search","nextslug":"/undirected-graphs-breadth-first-search","prevtitle":"Cycle Detection","prevslug":"/cycle-detection"}}}