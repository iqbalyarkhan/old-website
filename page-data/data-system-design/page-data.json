{"componentChunkName":"component---src-templates-post-js","path":"/data-system-design","result":{"data":{"markdownRemark":{"html":"<ol>\n<li>\n<p><a href=\"#introduction\">Intro</a></p>\n<ul>\n<li><a href=\"#dns\">DNS</a></li>\n<li>\n<p><a href=\"#types-of-data\">Types of data</a></p>\n<ul>\n<li><a href=\"#types-of-data---relational-model\">Types of data - Relational Model</a></li>\n<li><a href=\"#types-of-data---document-model\">Types of data - Document Model</a></li>\n<li><a href=\"#types-of-data---relation-vs-document-model\">Types of data - Relation vs Document Model</a></li>\n<li><a href=\"#types-of-data---graph-model\">Types of data - Graph model</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#data-encoding\">Data Encoding</a></p>\n<ul>\n<li><a href=\"#data-encoding---language-specific-encoders\">Data Encoding - Language Specific Encoders</a></li>\n<li><a href=\"#data-encoding---json-and-xml\">Data Encoding - JSON and XML</a></li>\n<li><a href=\"#data-encoding---avro\">Data Encoding - AVRO</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#data-flow\">DataFlow</a></p>\n<ul>\n<li><a href=\"#data-flow---rest\">Data Flow - REST</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a href=\"#distributed\">Distributed</a></li>\n<li><a href=\"#scalability\">Scalability</a></li>\n<li><a href=\"#reliability\">Reliability</a></li>\n<li><a href=\"#vertical-vs-horizontal-scaling\">Vertival vs Horizontal Scaling</a></li>\n<li>\n<p><a href=\"#load-balancers\">Load Balancers</a></p>\n<ul>\n<li><a href=\"#load-balancers-deep-dive\">Load Balancers Deep Dive</a></li>\n<li><a href=\"#balancing-algorithms\">Balancing algorithms</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#replication\">Replication</a></p>\n<ul>\n<li><a href=\"#replication-deep-dive\">Replication Deep Dive</a></li>\n<li>\n<p><a href=\"#single-leader-replication\">Single Leader replication</a></p>\n<ul>\n<li><a href=\"#single-leader-synch-vs-asynch-replication\">Single Leader: Synch vs Asynch replication</a></li>\n<li><a href=\"#single-leader-eventual-consistency\">Single Leader: Eventual Consistency</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#multi-leader-replication\">Multileader replication</a></p>\n<ul>\n<li><a href=\"#multi-leader-pros\">MultiLeader: Pros</a></li>\n<li><a href=\"#multi-leader-cons\">MultiLeader: Cons</a></li>\n</ul>\n</li>\n<li><a href=\"#leaderless-replication\">Leaderless replication</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#partitioning\">Partitioning</a></p>\n<ul>\n<li><a href=\"#partitioning-techniques\">Partitioning: Techniques</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#caching\">Caching</a></p>\n<ul>\n<li><a href=\"#cache-types\">Cache Types</a></li>\n</ul>\n</li>\n<li><a href=\"#content-delivery-network-cdn\">CDN</a></li>\n<li><a href=\"#web-tier-and-statelessness\">Web Tier and Statelessness</a></li>\n<li>\n<p><a href=\"#data-centers\">Data Centers</a></p>\n<ul>\n<li><a href=\"#data-centers-geo-routing\">Data Centers: Geo-Routing</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#decoupling\">Decoupling</a></p>\n<ul>\n<li><a href=\"#decoupling-message-queues\">Decoupling: Message queues</a></li>\n</ul>\n</li>\n<li><a href=\"#useful-architectures\">Useful architectures</a></li>\n</ol>\n<h3 id=\"introduction\"><a href=\"#introduction\" aria-label=\"introduction permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Introduction</h3>\n<p>If you were to setup your website today, from scratch, how would you go about doing it? You'd probably have a single server to serve your website. In this single server setup, everything is running on one server: your web application, maybe a database, your cache etc. You'll have something like this:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 672px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.61309523809524%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAABX0lEQVQoz42STWuDQBCG85v7h1rw3ktOvZQeSm5pwUMg0lLUBInGxnxo/J76DJ2kKQSiDju78+6zM+OO+r6Xrutks9nIarWS4/EoeZ5LURRqrDPHiPE0TSN1XUvbtjpfr9dSlqX6IxPsdjsVRVEkvu9rEOB8Pj+JD4eDgpfLpQRBoNrZbCaO48hkMjkDAdkmz/NUxBoA13UlyzKNke12u1VgGIay3+9lsVjIeDxW3UWGnAwUCEKyo8QkSRRiMdrDAWmaSlVVCmHNnpE5ZGRZsdmMNeBstp7ZY/1nxBTIJrKgsZaNin9fvjiONcbIgQYymI0K5FQrk5FS6rqSnmSGSqxs0zD/D7oA4tBDOxEf0Ec8lbfwSf22vYzThqtAJibA2q7RwPPnvTxM79QHeIoPFd0EtCbrO5T7/vUir96jZtj358b/TeBqyfxB+8t6hYpc0mS4c99cn/xUJoaW+TXgD+ToVJWF40J3AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Basic-Simple-Setup-Flow\"\n        title=\"Basic-Simple-Setup-Flow\"\n        src=\"/static/e47782298824bde7e74b3f6de694bb90/581a4/basic-setup.png\"\n        srcset=\"/static/e47782298824bde7e74b3f6de694bb90/27f03/basic-setup.png 173w,\n/static/e47782298824bde7e74b3f6de694bb90/376d0/basic-setup.png 345w,\n/static/e47782298824bde7e74b3f6de694bb90/581a4/basic-setup.png 672w\"\n        sizes=\"(max-width: 672px) 100vw, 672px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span> <a href=\"https://www.amazon.com/System-Design-Interview-insiders-Second/dp/B08CMF2CQF\">Image Credit</a></p>\n<p>A user would hit your website by either going to his/her browser or the mobile app, and enter the URL to your website. Next, this request will be routed to a domain name server that translates the address to an IP address and returns back to you. Let's talk a little more about the DNS:</p>\n<h3 id=\"dns\"><a href=\"#dns\" aria-label=\"dns permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>DNS</h3>\n<p> Anything connected to the internet - laptops, phones etc has an IP address. A DNS's job is to convert the IP address to something more recognizable (from 64.202.189.170 to yourwebsite.com). So, when you type yourwebsite.com into your browser, your browser sends a query over the internet to find the website for yourwebsite.com. The query, in simplified terms, would be \"What is the IP address of yourwebsite.com\". The request is first sent to the <strong>recursive resolver (RR)</strong> (usually operated by your ISP). RR knows which other DNS servers might know the answer to your question. </p>\n<p>The first server RR talks to is called the <strong>Root Server</strong>. These servers are running all over the world and each one knows DNS information about top level domains. These root servers are placed strategically around the world to handle user traffic appropriately. The root server then returns the IP address to the recursive resolver. Since the internet supports IPv4 and IPv6, the recursive resolver returns both ip addresses. Finally, now that the recursive resolver has the answer for \"What is the IP address of yourwebsite.com\", it can go ahead and visit the IP address and the server at that address responds to your request.  </p>\n<p>Now, say as your website grows, you want to show a personalized page for each visitor. To store each visitor's information, you need a data-store: ie database. This is what our flow would look like with a database:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 627px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.459330143540676%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAABqklEQVQoz11Sy07CUBD13/wLf8S9P+AnmLhhi2sJK1kYQ0yMCxoCAm2BtrwK9N1y7Dn1KjLJ9E7vnTkz59x7hdqiKIJt29jv94rjOEaaptjtdnLGh8MBZVkqTpJETttsNpjP54pPpxOu+CFAnudaB4OBimmj0QjT6VQxAYIgUOPJZKJ9xu12G61WC2EYKu8XkMaCfr8P13X1PxwOYVkWqqoS4Gq1guM4mM1mquEe83u9ngYSoOmeZRmKohAlOhMMNe5zJbChzPjSRJm6MIH6HY9HacIiNuAeNeQ+ZSCwMQJeugA5uud58H1flI1+NE65XC51RmdjFpniJq79J/69lHPbbrco84YOhTa3eU6LRmalJq7Bq1LNBXg+rnTMSnjhBO/Oc02xkYNTjsdj3S49rKVIkhiHOEX3w8HUD3EqC0nyDzBNm2k+Fh3cv9woLormORln05hTVznsdYzruw6e3mzlZlneUP6bMNXBl/+JrvVYU4FAHNfRu+Ok5r2S5jqMcPvQw6u1aADzC0A9j3pK3wuwdH3dsHlSzKFuzOE/PapvfxssEO42asTzb0BwTDoM2WVgAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Flow-with-DB\"\n        title=\"Flow-with-DB\"\n        src=\"/static/71501212bd1751140b86262522b51fbc/56f38/setup-with-db.png\"\n        srcset=\"/static/71501212bd1751140b86262522b51fbc/27f03/setup-with-db.png 173w,\n/static/71501212bd1751140b86262522b51fbc/376d0/setup-with-db.png 345w,\n/static/71501212bd1751140b86262522b51fbc/56f38/setup-with-db.png 627w\"\n        sizes=\"(max-width: 627px) 100vw, 627px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span> <a href=\"https://www.amazon.com/System-Design-Interview-insiders-Second/dp/B08CMF2CQF\">Image Credit</a></p>\n<p>Now, your website server would hit the database, get the user information/preferences and return the page rendered with that information.</p>\n<p>A few questions you should ask:</p>\n<h3 id=\"types-of-data\"><a href=\"#types-of-data\" aria-label=\"types of data permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Types of Data</h3>\n<p><strong>(1) What type of database should I use?</strong></p>\n<p>In order to answer this question, you need to understand the data model that you'll use to represent your data! The data model will determine how you THINK about the problem. You can use JSON or XML documents, tables in a relational database or a graph model. The representation that you choose for your data would determine how your data is queried, searched, manipulated and processed in various ways. Let's look at some common data models:</p>\n<h3 id=\"types-of-data---relational-model\"><a href=\"#types-of-data---relational-model\" aria-label=\"types of data   relational model permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Types of data - Relational Model</h3>\n<p>This is by far the best known model: the SQL model. Here, data is organized into relations (tables in SQL) where each relation is an unordered collection of tuples (rows in SQL). Common use cases for the SQL model constitute transaction processing such as entering sales or banking transactions, airline reservations etc and batch processing: customer invoicing, payroll, reporting  etc. </p>\n<p>In the relational model, the data is laid out in the open: a table is simply a collection of rows and that's it! There are no nested structures or complicated access paths to follow if you want to look at the data. You can read any or all rows in a table, selecting those that match a condition. In relational DBs, the <strong>query optimizer</strong> automatically decides which parts of the query to execute in which order, and which indexes to use. Those choices, when compared to document model, are effectively the access path BUT they're made automatically by the optimizer and not the app developer. </p>\n<p>The key insight of the relational model is this: you only need to build a query optimizer once and all applications that use the DB can benefit from it.  </p>\n<p>Sometimes, there's an awkward transitional layer required between the objects in application code (POJOs for example) and the database model of tables, rows and columns. In order to remedy this, object-relational mapping frameworks can be used such as Hibernate, Spring DAO etc. </p>\n<h3 id=\"types-of-data---document-model\"><a href=\"#types-of-data---document-model\" aria-label=\"types of data   document model permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Types of data - Document Model</h3>\n<p>In this category, the pre-dominant force is the family of NoSQL DBs. These came into existence to solve for:</p>\n<ul>\n<li>A need for greater scalability than relational databases: ie handling very large datasets and very high throughput</li>\n<li>Specialized query operations that are not well supported by relational model</li>\n</ul>\n<p>In the document model, records are saved as a single document. For example, a resume that can be represented using JSON. Databases such as MongoDB, RethinkDB, CouchDB and Espresso support document model. Document model reverted back to the hierarchical model by storing nested records within the parent record rather than in a separate table:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-cppjs\"><code class=\"language-cppjs\"><span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token string\">\"year\"</span> <span class=\"token punctuation\">:</span> <span class=\"token number\">2013</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"title\"</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">\"Turn It Down, Or Else!\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"info\"</span> <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token string\">\"directors\"</span> <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span> <span class=\"token string\">\"Alice Smith\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Bob Jones\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"release_date\"</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">\"2013-01-18T00:00:00Z\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"rating\"</span> <span class=\"token punctuation\">:</span> <span class=\"token number\">6.2</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"genres\"</span> <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"Comedy\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Drama\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"image_url\"</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">\"http://ia.media-imdb.com/images/N/O9ERWAU7FS797AJ7LU8HN09AMUP908RLlo5JF90EWR7LJKQ7@@._V1_SX400_.jpg\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"plot\"</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">\"A rock band plays their music at high volumes, annoying the neighbors.\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"actors\"</span> <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"David Matthewman\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Jonathan G. Neff\"</span><span class=\"token punctuation\">]</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token string\">\"year\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2015</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"title\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"The Big New Movie\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"info\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token string\">\"plot\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Nothing happens at all.\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"rating\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">0</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span></code></pre></div>\n<h3 id=\"types-of-data---relation-vs-document-model\"><a href=\"#types-of-data---relation-vs-document-model\" aria-label=\"types of data   relation vs document model permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Types of data - Relation vs Document Model</h3>\n<p>There are many differences to consider when deciding whether to use relational DBs or document DBs. Let's create a quick table to compare and contrast the two:</p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>Relation Model</th>\n<th>Document Model</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>Schema Flexibility</strong></td>\n<td>If you want to add a new field to your existing schema, you'd have to update the tables. There needs to be a middle layer to translate your code objects to data in DB.</td>\n<td>Schema changes are easier in the document model where all you need to do is add a field to the schema and expect the clients to handle that new field. Plus, your application code would have the same data objects that the DB uses.</td>\n</tr>\n<tr>\n<td><strong>Performance</strong></td>\n<td>In order to get all the data that you need, you'd have to customize your query.</td>\n<td>In document model, the performance is better due to locality. If your application needs to access the entire document (to render on a web page for example), then reading entire data in one go would be better than having to join across tables to get all relevant information</td>\n</tr>\n<tr>\n<td><strong>Relations in data</strong></td>\n<td>There's better support for joins, many-to-one and many-to-many relationships</td>\n<td>For joins and multiple relations, you'd have to have references that can get complicated pretty fast!</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"types-of-data---graph-model\"><a href=\"#types-of-data---graph-model\" aria-label=\"types of data   graph model permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Types of data - Graph model</h3>\n<p>We've seen that many-to-many relationships can cause relational and document models to break. If your data consists of numerous many to many relations, then the graph model would be best suited. As with our vanilla graph data structure, a graph model comprises of vertices and edges. Well known graph algorithms can then operate on these structures. </p>\n<h3 id=\"data-encoding\"><a href=\"#data-encoding\" aria-label=\"data encoding permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Data Encoding</h3>\n<p>Since we're on the topic of data, let's talk about another common action performed with (on?!) data: data encoding. Usually, applications keep data in in-memory data structures such as arrays, hash tables, trees etc. where it is easy to access and modify. When want to send that same data over a network to another process or save that data in a file, you need to encode it. The translation of data from in-memory representation to a byte sequence is called <strong>encoding</strong> and when you receive that same information over a network and want to use it locally in your application you perform the reverse process: aka <strong>decoding</strong>. There are a myriad different libraries and encoding formats to choose from. </p>\n<h3 id=\"data-encoding---language-specific-encoders\"><a href=\"#data-encoding---language-specific-encoders\" aria-label=\"data encoding   language specific encoders permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Data Encoding - Language specific encoders</h3>\n<p>Most OOP languages come built-in with encoders. For example, Java has java.io.Serializable, Ruby has Marshal etc. The advantage of using these libraries is they're convenient and easy to use. However, disadvantage here is that you're now tied to that language. If you're sending over data serialized using java's serializable, you expect your recipient to deserialize it using the same. Plus, this encoding/decoding process is notorious for its poor performance and bloated encoding. </p>\n<h3 id=\"data-encoding---json-and-xml\"><a href=\"#data-encoding---json-and-xml\" aria-label=\"data encoding   json and xml permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Data Encoding - JSON and XML</h3>\n<p>Moving on from language specific encoders, we can use JSON, XML and CSV as encoding options. These are widely known and are language agnostic. However, using these formats, it is hard to distinguish between a string and an integer. You're also limited by the precision of your floating point integers. In addition, JSON and XML, although popular, are not the most memory/space efficient encoding methods.</p>\n<h3 id=\"data-encoding---avro\"><a href=\"#data-encoding---avro\" aria-label=\"data encoding   avro permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Data Encoding - AVRO</h3>\n<p>Apache AVRO, is a binary encoding format that uses a schema (in .avsc files) to specify the structure of the data being encoded. The resulting encoded data is in binary format and is compact as compared to JSON and XML. In addition, AVRO allows forward and backward compatibility semantics. To parse avro data, you go through the fields in the order that they appear in the schema and use the schema to tell you the datatype of each field. This means binary data can be decoded correctly if the code is reading the data using the exact same schema as the code that wrote the data.</p>\n<h3 id=\"data-flow\"><a href=\"#data-flow\" aria-label=\"data flow permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Data Flow</h3>\n<p>So far we've discussed how data is stored, retrieved and encoded but have avoided how it is transferred. For example, how would a service, running on a server receive our data and how would it respond back to our request? Let's look at a few basic modes of data flow:</p>\n<h3 id=\"data-flow---rest\"><a href=\"#data-flow---rest\" aria-label=\"data flow   rest permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Data Flow - REST</h3>\n<p>When HTTP is used as the underlying protocol for talking to a service running on a server, it is called a web-service. One approach to speak with a web-service is to use the REST. REST is not a protocol but a design philosophy that models its principles after HTTP. It uses verbs to interact with the web-service by utilizing GET to retrieve information and POST to update it on a web-service. With REST APIs you can expect the response from a running service instantaneously. </p>\n<h3 id=\"data-flow---message-passing\"><a href=\"#data-flow---message-passing\" aria-label=\"data flow   message passing permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Data Flow - Message Passing</h3>\n<p>So far, we've looked at the REST philosophy of interacting with web-services which is a synchronous request-response model. We can also pass data to services using asynchronous message passing systems that deliver messages to another process with low latency via an intermediary called the <strong>message broker or message queue</strong>. The message queue stores the message temporarily and acts as a buffer between the sender and the web-service. There are several advantages if MQs are used: </p>\n<ul>\n<li>They can act as a buffer if the recipient is unavailable or overloaded thus improving system reliability</li>\n<li>It can automatically redeliver messages to a process that crashed, thus improving system durability</li>\n<li>It allows one sender to send messages to multiple recipients</li>\n<li>It <strong>decouples</strong> the sender from the recipient: the sender will send the message out into the abyss and won't care what services consume those messages</li>\n</ul>\n<p>The general flow of data to MQs is as follows: One process sends a message to a queue or a topic, and the broker ensures that the message is delivered to one or more consumers of or subscribers to the that queue or topic.  </p>\n<h3 id=\"distributed\"><a href=\"#distributed\" aria-label=\"distributed permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Distributed</h3>\n<p>So far, we've looked at a simple single server architecture. We've talked about how our data can be encoded and transmitted to services. In summary this is what we have as of now:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 672px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.61309523809524%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAABX0lEQVQoz42STWuDQBCG85v7h1rw3ktOvZQeSm5pwUMg0lLUBInGxnxo/J76DJ2kKQSiDju78+6zM+OO+r6Xrutks9nIarWS4/EoeZ5LURRqrDPHiPE0TSN1XUvbtjpfr9dSlqX6IxPsdjsVRVEkvu9rEOB8Pj+JD4eDgpfLpQRBoNrZbCaO48hkMjkDAdkmz/NUxBoA13UlyzKNke12u1VgGIay3+9lsVjIeDxW3UWGnAwUCEKyo8QkSRRiMdrDAWmaSlVVCmHNnpE5ZGRZsdmMNeBstp7ZY/1nxBTIJrKgsZaNin9fvjiONcbIgQYymI0K5FQrk5FS6rqSnmSGSqxs0zD/D7oA4tBDOxEf0Ec8lbfwSf22vYzThqtAJibA2q7RwPPnvTxM79QHeIoPFd0EtCbrO5T7/vUir96jZtj358b/TeBqyfxB+8t6hYpc0mS4c99cn/xUJoaW+TXgD+ToVJWF40J3AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Basic-Simple-Setup-Flow\"\n        title=\"Basic-Simple-Setup-Flow\"\n        src=\"/static/e47782298824bde7e74b3f6de694bb90/581a4/basic-setup.png\"\n        srcset=\"/static/e47782298824bde7e74b3f6de694bb90/27f03/basic-setup.png 173w,\n/static/e47782298824bde7e74b3f6de694bb90/376d0/basic-setup.png 345w,\n/static/e47782298824bde7e74b3f6de694bb90/581a4/basic-setup.png 672w\"\n        sizes=\"(max-width: 672px) 100vw, 672px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span> <a href=\"https://www.amazon.com/System-Design-Interview-insiders-Second/dp/B08CMF2CQF\">Image Credit</a></p>\n<p>We've talked about data that's stored on a single machine but ask this question:</p>\n<p><strong>What if there are a lot of users connecting to your site at the same time?</strong>\nBy asking this question, you're looking to make your website <strong>scalable, available and reliable</strong>. (With this type of architecture, your data storage and retrieval would occur between multiple databases):</p>\n<h3 id=\"scalability\"><a href=\"#scalability\" aria-label=\"scalability permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Scalability</h3>\n<p>A scalable system is one that is <strong>able to deal with its growth</strong>. Growth can be defined as increased volume of data or increased traffic volume. Scalability is used to describe how the system copes with increased load. </p>\n<p>It doesn't make sense to just say system X is scalable. What does that mean? Scalability needs to be considered by asking questions like <strong>if the system's load increases how are we going to handle that growth?</strong> For example, a system could suddenly go from 100 to million users or a client uploads TBs of data through our system: is our system able to handle these sudden spikes? </p>\n<h3 id=\"reliability\"><a href=\"#reliability\" aria-label=\"reliability permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reliability</h3>\n<p>A reliable system is one that <strong>continues to work correctly(ie correct function and performance levels) in the face of adversity(hardware or software failures).</strong></p>\n<p>Reliable systems are fault tolerant: this fault can be a human error (incorrect input) or hardware/software errors. Even under faulty circumstances, our system continues to be reliable. Reliable systems are <strong>resilient</strong> and <strong>fault tolerant</strong>.</p>\n<p>There are several types of faults:</p>\n<ul>\n<li>Hardware faults: Hard disk crash, RAM becomes faulty, electric outage etc. To prevent hardware faults, we add redundancy to our applications: setup disks in RAID (redundant array of independent disks) configuration, have dual power supplies, backup power for data centers etc.  </li>\n<li>Software faults: Leap year errors, bad input errors etc. Happen in unusual set of circumstances. </li>\n<li>Human errors</li>\n</ul>\n<p>In the example where you have a single server, your server might grind to a halt if a number of users hit your website at the same time. You have 2 options:</p>\n<ul>\n<li>Scale vertically: Add more compute power to a single machine</li>\n<li>Scale horizontally: Add more servers to your backend</li>\n</ul>\n<h3 id=\"vertical-vs-horizontal-scaling\"><a href=\"#vertical-vs-horizontal-scaling\" aria-label=\"vertical vs horizontal scaling permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Vertical vs Horizontal Scaling</h3>\n<p>Vertical scaling is when you join many CPUs, RAMs and disks together under one OS where a fast interconnect allows any CPU to access any part of the memory or disk. In this kind of <strong>shared memory</strong> architecture, all components can be treated as a single machine. Therefore, when the number of users increase, the only thing you can do is add more CPU, RAM and disk to that single machine.</p>\n<p>Horizontal scaling is when you have multiple machines running the same software connected via a network. Each machine running the software or holding our DB is called a node. Each node uses its CPUs, RAM and disks independently. Any coordination between nodes is done at the software level, using a conventional network. From this point on, in this post, we'll assume that we've chosen to use horizontal scaling and have multiple cheap machines connected together over the network. </p>\n<h3 id=\"load-balancers\"><a href=\"#load-balancers\" aria-label=\"load balancers permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Load Balancers</h3>\n<p>Now that our backend is setup with a horizontally scaled system, we can go ahead and improve our system's availability, reliability and scalability. To test our system so far, consider this: say you suddenly start receiving a lot of traffic and have a collection of servers in your backend, how do you direct traffic to each of the servers? You want to utilize the servers to a point where the work-load is evenly distributed among all available servers. Enter <strong>load balancers</strong>:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 659px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 78.7556904400607%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsSAAALEgHS3X78AAACgElEQVQ4y5WUy27TUBCG81a8Cy/Bmg2vUNYsWEZCdAFCggVSKZUqtVKVblIpJCX3i534dnx8PT72z8wkDhECiR5pZI895/fMN3PcaZoGdV2Ltcvavd+Q5VWFbZwgygskVQ1tLOLSkFV0vzdVGGjygQYdFrTWitB8PsdqtZL7Rj7QQNHmleMiUjGCKEIUx7C0J8kyPI7H0GmKqm4Q5CVYq9NmFgQBut0u3p+fY7zcQFNApDM4cSrvNQn1ej0MBgPxIxK/vbmRfeKfCrIVRYGLiwt8v7pCmuUwlSWr4GeFBCZaY7VcwtmsURkj/nw2I0GfCmkQFQfBliGvkkR0Vu5LpuccqKlkLodZpVRaRo9DYsY8U7tHwmIcIwzLskSSJMiIydYPsHR2KPIcCbFpszfEmK2kzDTFbryQWGrkVFV1eGe5iZyhUgrD4VCYpCQyGo0wmUzguq40qxWV5hGCMAwQkYWBJ/FS4SFOBGOC7TiOwA3DEEvi5Pu++KeC9jBGTOKyv6ZRKn6joXUU1AR3vV6L6G63w3Q6lStnXFFGR0G75zxxYzx7+QVnn/pQvovpbI7FYgFGx6tjiAtv5tI5Q76yz1zbhnGm3PGmtvBVinfXP3E3clFXRtjzhHDMscv/Wm12nKnvefQhBXe7k3cqCuG4O5nPluVxDln9T2vF2i4XJLqgKdhyd2m8UhqX6dZDSGLlaZdPz/LfzSKj85ubHN37V3j0escKPj6c4Wb2QRqVmwPD/xEsaIhzk+L19XP0ncuj4Nu7F/g6eiP3TxDkPw5ZkeH2x2e44ewAGLgff8No2aPhhiB5giANdJph7YbwVIKEJkNRZx1PkUWI6egZ+WM1+AVG6s+yWzfDKwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Load Balancers\"\n        title=\"Load Balancers\"\n        src=\"/static/d8d640ba0c5d4fa9dae0d92221356457/b8d47/load-balancers.png\"\n        srcset=\"/static/d8d640ba0c5d4fa9dae0d92221356457/27f03/load-balancers.png 173w,\n/static/d8d640ba0c5d4fa9dae0d92221356457/376d0/load-balancers.png 345w,\n/static/d8d640ba0c5d4fa9dae0d92221356457/b8d47/load-balancers.png 659w\"\n        sizes=\"(max-width: 659px) 100vw, 659px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span> <a href=\"https://www.amazon.com/System-Design-Interview-insiders-Second/dp/B08CMF2CQF\">Image Credit</a></p>\n<p>A user connects to the <strong>public IP</strong> of your load balancer (public IP means one that is available over the internet) and we move the web servers to private IP addresses (NOT reachable over the internet). Now, all traffic is directed to the load-balancer. The load balancer will be aware of the status of each of the web servers and if either goes down, traffic can be routed to the correct server. With the addition of a load balancer, we've solved the problem of servers going down.</p>\n<h3 id=\"load-balancers-deep-dive\"><a href=\"#load-balancers-deep-dive\" aria-label=\"load balancers deep dive permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Load Balancers Deep Dive</h3>\n<p>Now, you might be wondering, what are the different ways I can choose to route which traffic goes to which server? Well, in an OSI model, there are 7 layers: the most abstract layer is the application layer (ie application logic) and the most concrete layer is the physical layer:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 337px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e384a67482fca7a6e2ed7ad5b70176f6/e772b/osi-layers.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 115.13353115727003%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAXABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAECAwX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHt1mpqDMFwf//EABkQAAIDAQAAAAAAAAAAAAAAAAABAhAxQf/aAAgBAQABBQLRJMRyOqsIn//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8BH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8BH//EABkQAAMBAQEAAAAAAAAAAAAAAAABEBEhsf/aAAgBAQAGPwLWd9jjMjP/xAAeEAACAgICAwAAAAAAAAAAAAABEQAhMVEQYXGxwf/aAAgBAQABPyGmAlWYII27wiWEKKnuPBn5/I0ydmBWuXBbM//aAAwDAQACAAMAAAAQ8A88/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPxAf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPxAf/8QAHhAAAgICAgMAAAAAAAAAAAAAAREAMSFRQfBxwdH/2gAIAQEAAT8QAvILOsGBUIyQBMN3FkDcOh9lh6ONtgd5hvtpEXsXIXJj1vFCFgSA8PwB6n//2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"OSI Layers\"\n        title=\"OSI Layers\"\n        src=\"/static/e384a67482fca7a6e2ed7ad5b70176f6/e772b/osi-layers.jpg\"\n        srcset=\"/static/e384a67482fca7a6e2ed7ad5b70176f6/6bc31/osi-layers.jpg 173w,\n/static/e384a67482fca7a6e2ed7ad5b70176f6/e772b/osi-layers.jpg 337w\"\n        sizes=\"(max-width: 337px) 100vw, 337px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Load balancing can be done at:</p>\n<ul>\n<li><strong>Layer 4 (L4)</strong>:\nHere, load balancers work at the transport level. That means they can make routing decisions based on the TCP or UDP ports that packets use along with their source and destination IP addresses. L4 load balancers perform Network Address Translation but do not inspect the actual contents of each packet.</li>\n<li><strong>Layer 7 (L7)</strong>:\nHere, load balancers act at the application level, the highest in the OSI model. They can evaluate a wider range of data than L4 counterparts, including HTTP headers and SSL session IDs, when deciding how to distribute requests across the server farm.</li>\n</ul>\n<h3 id=\"balancing-algorithms\"><a href=\"#balancing-algorithms\" aria-label=\"balancing algorithms permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Balancing algorithms</h3>\n<p>There are a few algorithms that can be used by a balancer to determine which server gets the request from a pool of possible servers. Here're a few common algorithms:</p>\n<ul>\n<li><strong>Round Robin</strong></li>\n</ul>\n<p>Round robin is a simple technique for making sure that a virtual server forwards each client request to a different server based on a rotating list. It is easy for load balancers to implement, but does don’t take into account the load already on a server. There is a danger that a server may receive a lot of processor-intensive requests and become overloaded.</p>\n<ul>\n<li><strong>Least Response Time Method</strong></li>\n</ul>\n<p>The least response time method relies on the time taken by a server to respond to a health monitoring request. The speed of the response is an indicator of how loaded the server is and the overall expected user experience. Some load balancers will take into account the number of active connections on each server as well.</p>\n<ul>\n<li><strong>Hashing Methods</strong></li>\n</ul>\n<p>Methods in this category make decisions based on a hash of various data from the incoming packet. This includes connection or header information, such as source/destination IP address, port number, URL or domain name, from the incoming packet.</p>\n<p>With the help of load-balancers, we've managed to break our web-service so that user requests for the home page are forwarded to only those nodes that are healthy and are not under heavy load. To do so, we'll be using one of the load balancing algorithms described above. Having said that, this is what our architecture looks like as of now:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 690px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 83.47338935574228%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsSAAALEgHS3X78AAACwUlEQVQ4y3VU227TQBD1b/LIV1QCPgEJ3nlAKEIF+kApfYNSkArlkgAqBNGStEkcx4njxPF9vV7nMLO+kBYYaZy1Z+fMnLOzMdbrNWqvbfNbXhQIsxwRuyw9zKT2RBWIpUIgJMWl3m/wo6AktiRJked5A0pPDTAaW1gFAVIGEQJSKe2WbcPzfRS0lwFjKWHUYOPxGDs7Ozg8fE1JEoKCgjYt47KIpPezs1MMBwPdAHu324U9meh8wd3TfkNRJbZer4dWq4W95/tY+BFCAvKjBE4Q6XgUhvjc6eDbyQkxSZBlGTrtNvr9PtYEzh1rwE39+hcD+ERh0wLalFL1lDvO82bNnlAsIpmYjaZcd8h0JFV0vACyosc0uRBXDkWm9eGkNFdYUOd+miGhdVxRjSiftTQcx4FlWZqGadkYmSamUxLb8/6cfuVMzZ07GFsTmKS5t1xWB1iUcQacTqeYkLCsyWKx0OA2nZ7ruqgnoHZVlIlJmkKp/JI0Zc2qQwZg0MFwCJM6nM/nWFJ1BrkKynZn9wu235xCSUGaB1itVhA0TmwacDQaacAhAfL48Jq7rcE2hz7JFK7ffYlbrfckyxKz2UyzCmkKNCD+Y5tgfHCcEMcRAvrtWS76Y0e/p0Sfu1tXOcYljVTpm9/K70rT8mk+bcelTIVMpDAnM4RBrGN1ceNftK6aZFAKD+YkjTenUaJBLtawaT1wTOQ8XjRCTYd8Z/m6PTj4gWfHv6iiB5c05INhjbxKn4dHW+ic7zeFPvV38ejtTU7XA89YzV2ORY5rt19g6/4R4tCvKPr6cPw41nu2322hfb7XALbPn+Lx8Q29/gswJWHv7bfx5NVXuM5MzyGPD3tEMf6j+Pj9ABfWT9Tq9EZdfDg5QEyXQpDODSBz55OKVi4if4mrcrJmUUozF6YIE1Hdab7HGYJI6BhfUcb5Df4GFTBaJFy4AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"load-balancer-single-db\"\n        title=\"load-balancer-single-db\"\n        src=\"/static/d5c20f28908b218f1177e8ca5003e4bb/1dda8/load-balancer-single-db.png\"\n        srcset=\"/static/d5c20f28908b218f1177e8ca5003e4bb/27f03/load-balancer-single-db.png 173w,\n/static/d5c20f28908b218f1177e8ca5003e4bb/376d0/load-balancer-single-db.png 345w,\n/static/d5c20f28908b218f1177e8ca5003e4bb/1dda8/load-balancer-single-db.png 690w,\n/static/d5c20f28908b218f1177e8ca5003e4bb/3298e/load-balancer-single-db.png 714w\"\n        sizes=\"(max-width: 690px) 100vw, 690px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span> <a href=\"https://www.amazon.com/System-Design-Interview-insiders-Second/dp/B08CMF2CQF\">Image Credit</a></p>\n<p>Now the web tier looks good but what about the data tier? The current design has one database, so it does not support failover and redundancy. Meaning, what if our DB is hit with a time consuming query or what if the database node is down? Database replication is a common technique to address those problems. Let us take a look.</p>\n<h3 id=\"replication\"><a href=\"#replication\" aria-label=\"replication permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Replication</h3>\n<p>In replication, the idea is to <strong>replicate</strong> the same information across multiple databases. To replicate this information, we'll designate one server that holds our database as the <strong>leader</strong> and remaining servers as <strong>followers</strong>. The leader will:</p>\n<ul>\n<li>Handle all CUD (Create, update and delete) operations</li>\n<li>Forward any new data to the followers so that the followers have up to date information</li>\n</ul>\n<p>The followers will:</p>\n<ul>\n<li>Handle all read operations</li>\n</ul>\n<p>A setup with multiple DBs (along with leader/follower) setup might look like this: </p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 690px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 34.91803278688524%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsSAAALEgHS3X78AAAA7klEQVQY01WQ25KDIBBE/f//Mz54LRdLvAJRvCXKHrWyle0HCma6e5rxxnGs61qp/vXBuq7btr2/QFFrXVWVEIIuz7voDcMziqKiKI7jcM5xBkEAlTuMfd+5MGCA9zR937sPaHk4lWUZx3GWZcboOwhDkgtC/LRtO03TeqFpGsbc1qcYeynLx8OnCq/runmel2WRUiZJXFUSJabAGJOmKY4M2y6cYixpWDtaa/+iEgQSjkopCCTK8xwtXjCxY4bHv91/XH937AY9p+/7iKnAJhcXPhWG4SkmIfo7xusLLEhrRVqWdLcIxTqv1kAR4S/GEY4LSC21ugAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Leader Follower\"\n        title=\"Leader Follower\"\n        src=\"/static/7c0c0cad38fa857d6548b4de3557097d/1dda8/leader-follower.png\"\n        srcset=\"/static/7c0c0cad38fa857d6548b4de3557097d/27f03/leader-follower.png 173w,\n/static/7c0c0cad38fa857d6548b4de3557097d/376d0/leader-follower.png 345w,\n/static/7c0c0cad38fa857d6548b4de3557097d/1dda8/leader-follower.png 690w,\n/static/7c0c0cad38fa857d6548b4de3557097d/bcbcb/leader-follower.png 1035w,\n/static/7c0c0cad38fa857d6548b4de3557097d/00eef/leader-follower.png 1220w\"\n        sizes=\"(max-width: 690px) 100vw, 690px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span> <a href=\"https://www.amazon.com/Designing-Data-Intensive-Applications-Reliable-Maintainable/dp/1449373321\">Image Credit</a></p>\n<p>Advantages of replicating our databases:</p>\n<ul>\n<li>Improved performance</li>\n<li>Reliability: If one node goes down, we have the data on several other nodes</li>\n<li>Availability: By having replicas close to your clients, you can render content fast</li>\n</ul>\n<p>The entire system is shown below:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 643px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 103.42146189735615%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAAAsSAAALEgHS3X78AAADJElEQVQ4y41Vy44bRRSdL2TNVyDlD9iyQIIFC8QCISFWrJCSsEBAomGBmFGiMInHmXjsdrfdj+qH+91d1e3DueXMaDydiSjpqq+r6p665758st/vIavseiR1g8oMKClFb6xUZrQiek5pePaxdQIC6nEPL0kRRhGKqkZWFBj4zsgLoVJQPBNdEyzrNPdieNstVus11q6LONvhn7NzXFxcEJCrFa/4uqzlYoH55Qy66/hrj6v5HMvrxa0HTlLg4trFq7cL/Hu1xMpXWAYJHj95ir9OTw+APQHTtkPda3hhBNcPEKUZiqbFehtgwz3RG22QtD0KMgiCAHGsMI6jfUi+Iic3MdT8dBRNPWk0mmFELRRbjfb9fkfbfhiPYib2AiRfEeuhvBgzVkkcI6VEScZLh+CH1CPGVs7l2zEUYjgMw61Xd0EtYF3XSNPUyi7LUDcNnCjHWpUIkh3yfIeEZyKdjS2OwI4AbyjfX1/+8hqffPEHPJUjSxR830cYhjDGTGhOAG9eExEqkt0X1wpPzh0mo4PRHVomTby7T/FBwMPBIeBlrdHr3upZ2Qj+7br7+F3bI0ARTc96VrOXbfHGX1i9Y0b9PMaZc4aW560xD2Z3Alj1B4+eLX/E0/k3760AL7/E9+ePMDDrNeswz3MrEpqPetgYbQFerv7ES+e3W0+CxMHz2c/QfWcLW9oziqbJmQD2fLGi0cL18c6N2DU9el5y/AiXyy12VcUQDP+Psm0fOeDFXLLKYaHyGn5acHAAFSdRZw4Je6igJx4aUnZdDxWLWpFWGKfYKgqnSk9vHU6Vhg1wv6jHDxf2Hi2N3pGuykukeWFBhsEgZnfEeYXlJuB+OSmdiYeGSq013ngxroKMFAcOir0tE4mrDA2SxNxPMdukjOtA+sexnPSyE1f49KtTPHsdWG8bDtEV6c/mb7EJQlvwXz+e4dEP5xZESkz6/0Odc8Jqghum+Ozb5/j9xTWnskbJxBRVg7ysqbcYSf27X1/h85/+FsJsxwZrTmul1BRQ5pvHpl+5a3iBz3o0nIPGloj8fwj1kp6stxuO/Q1UUdq9hyj/B1uHU58foicdAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Entire System\"\n        title=\"Entire System\"\n        src=\"/static/adb3c3e6a671253016e8be82ce18f337/6ab6c/entire-system.png\"\n        srcset=\"/static/adb3c3e6a671253016e8be82ce18f337/27f03/entire-system.png 173w,\n/static/adb3c3e6a671253016e8be82ce18f337/376d0/entire-system.png 345w,\n/static/adb3c3e6a671253016e8be82ce18f337/6ab6c/entire-system.png 643w\"\n        sizes=\"(max-width: 643px) 100vw, 643px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span> <a href=\"https://www.amazon.com/System-Design-Interview-insiders-Second/dp/B08CMF2CQF\">Image Credit</a></p>\n<p>Finally, the flow for this design shown would be:</p>\n<ul>\n<li>A user gets the IP address of the load balancer from DNS.</li>\n<li>A user connects the load balancer with this IP address.</li>\n<li>The HTTP request is routed to either Server 1 or Server 2.</li>\n<li>A web server reads user data from a follower database.</li>\n<li>A web server routes any data-modifying operations to the master database. This includes write, update, and delete operations.</li>\n</ul>\n<h3 id=\"replication-deep-dive\"><a href=\"#replication-deep-dive\" aria-label=\"replication deep dive permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Replication Deep Dive</h3>\n<p>As we said earlier, replicating data allows us to create available, scalable systems. Replicating data that is not changing (static) is easy, real difficulty lies in replicating data that is changing often. There are 3 main ways to replicate data: <strong>single leader replication</strong> (one we discussed briefly above), <strong>multi-leader replication</strong> and <strong>leaderless replication</strong>. Let's have a look at all 3 in detail:</p>\n<h3 id=\"single-leader-replication\"><a href=\"#single-leader-replication\" aria-label=\"single leader replication permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Single Leader Replication</h3>\n<p>As we said in our intro, this type of replication deals with a single node acting as a leader. This node is responsible for receiving insert/update requests from the user and then propagating any changes made to the data to the followers. We have the remaining nodes acting as followers: followers are used for read operations only. Whenever the leader writes new data to its local storage, it also sends the data change to all of its followers.</p>\n<p>The leader can transmit the changes to the followers via 2 methods: <strong>synchronous replication</strong> and <strong>asynchronous replication</strong>:</p>\n<h3 id=\"single-leader-synch-vs-asynch-replication\"><a href=\"#single-leader-synch-vs-asynch-replication\" aria-label=\"single leader synch vs asynch replication permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Single Leader: Synch vs Asynch Replication</h3>\n<p>In <strong>synchronous replication</strong>, the leader waits to get an ok response from <strong>all</strong> followers before sending an ok response back to the client. The advantage here is that all the followers will ALWAYS have up to date information. Disadvantage is that if one follower is down, the entire system will grind to a halt. This defeats the purpose of having a highly available system! Therefore, it is impractical to have completely synchronous replication.</p>\n<p>In <strong>asynchronous replication</strong>, the leader will only update its local storage with the updates and send the ok response back to the client, without waiting for ANY of the followers to send back the ok response. Advantage here is response times are low. Disadvantage here is that if the leader goes down, there could be information loss.</p>\n<p><strong>Compromise</strong> here is that replication is usually <strong>semi-asynchronous</strong> where the leader will wait for at-least one follower to respond with an ok before sending the confirmation back to the client. </p>\n<h3 id=\"single-leader-eventual-consistency\"><a href=\"#single-leader-eventual-consistency\" aria-label=\"single leader eventual consistency permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Single Leader: Eventual consistency</h3>\n<p>In read heavy workloads, the attractive option is to create many followers and distribute read requests across the followers. This removes load from the leader and allows read requests to be served by nearby replicas. As the number of followers increase, the probability that one of the followers has stale data (assuming asynchronous replication) also increases. We call this phenomenon <strong>eventual consistency</strong>: the reality where all followers will eventually have up to date data. This eventual propagation of data to followers is called <strong>replication lag</strong>. </p>\n<p>This replication lag results in poor customer experience! Imagine you posted a comment on facebook and when you refreshed the page your comment disappeared! There are a few solutions to tackle this problem:</p>\n<ul>\n<li><strong>Read your own writes</strong></li>\n</ul>\n<p>Always read the user's profile from the leader, and any other user's profiles from a follower. In our facebook example, we used user profile, in other systems this information could be something else (that a user updated). BUT, what if the user can edit a lot of items?!</p>\n<ul>\n<li><strong>Make all reads from leader</strong></li>\n</ul>\n<p>Now what if the user can make edits to a bunch of items, all requests would end up with the leader which defeats the purpose of having a distributed system! In that case read your own writes won't work. Another possible solution is to keep track of the latest update and say for one minute after the last update, direct all read requests to the leader. BUT, what if the users of the system make a lot of edits?!</p>\n<ul>\n<li><strong>Read from same replica</strong></li>\n</ul>\n<p>Another solution is to read from the same replica for the same user. That way the user is always guaranteed to see up to date, instant changes. </p>\n<h3 id=\"multi-leader-replication\"><a href=\"#multi-leader-replication\" aria-label=\"multi leader replication permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Multi-leader Replication</h3>\n<p>If you have a setup with multiple data-centers located in geographically separated locations, you'd have to use multi-leader replication. That is because each user would be connected to the data center closest to him/her and the leader from that data center would then asynchronously replicate that information to other leaders and data centers.   </p>\n<h3 id=\"multi-leader-pros\"><a href=\"#multi-leader-pros\" aria-label=\"multi leader pros permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Multi-leader: Pros</h3>\n<p>As compared to single leader replication, there're advantages that a multi-leader setup enjoys:</p>\n<ul>\n<li><strong>Performance</strong></li>\n</ul>\n<p>In single leader, every write must go to the single leader. No matter how far you're located from that leader, every write will go the leader via the internet. In multi-leader, every write can be processed at the local data center and then replicated to other data centers. This results in a better perceived performance.</p>\n<ul>\n<li><strong>Tolerance</strong></li>\n</ul>\n<p>If single leader goes down, new writes/updates need to be halted and a new leader has to be elected before accepting new writes/updates. With multi-leader, if a leader goes down, other centers can continue to operate and the down leader can catch up once it is back.  </p>\n<h3 id=\"multi-leader-cons\"><a href=\"#multi-leader-cons\" aria-label=\"multi leader cons permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Multi-Leader: Cons</h3>\n<p>In single leader, since all writes go to one leader, there's always just a single source of truth. If 2 clients try to write at the same time, one client would have to wait until the other is done. With multi-leader, that is not the case: there can be write conflicts. </p>\n<p>To resolve for write conflicts, there're a bunch of different techniques: last write wins, merger of writes, ask user to resolve conflicts etc. </p>\n<p>If your setup requires low latency high availability for geographically dispersed users, multi-leader configuration is the way to go. </p>\n<h3 id=\"leaderless-replication\"><a href=\"#leaderless-replication\" aria-label=\"leaderless replication permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Leaderless replication</h3>\n<p>Another method to replicate data across servers is to get rid of leaders entirely: every node is a leader. The client sends its writes to multiple nodes and waits for a specific number of acknowledgements before a write can be considered a success. </p>\n<p>If a node goes down and is unable to receive a write, it'll return stale data. Upon returning stale data, up to date nodes can provide the stale data node with up to date information. This is called <strong>read repair</strong></p>\n<p>Another way to prevent stale data from being returned is to perform periodic scans of all nodes and update any nodes that have fallen behind. This is called <strong>anti-entropy process</strong>.</p>\n<h3 id=\"partitioning\"><a href=\"#partitioning\" aria-label=\"partitioning permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Partitioning</h3>\n<p>Replication of your data across multiple servers goes hand in hand with partitioning of data. Say for example, your data set is so large that it is impossible for us to hold it on a single machine. This is where data <strong>sharding</strong> or <strong>partitioning</strong> comes into picture. The main reason for wanting to partition data is scalability. Different partitions can be placed on different nodes. As a result, a large data set can be distributed across many disks and the query load can be distributed across many processors. The goal is to spread the data and query load evenly across our nodes. </p>\n<p>Unfair partitioning would result in <strong>skewed</strong> queries that result in <strong>hotspots</strong>. There are multiple approaches to distributing or sharding data across partitions:</p>\n<h3 id=\"partitioning-techniques\"><a href=\"#partitioning-techniques\" aria-label=\"partitioning techniques permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Partitioning: Techniques</h3>\n<p>The simplest approach to help avoid hotspots is to assign records to nodes randomly. That would distribute the data quite evenly across nodes. HOWEVER, when you go back to read the partitioned data, you'd have no way of knowing where the data is since it was partitioned randomly! </p>\n<p>A better approach is to partition by <strong>key range</strong>: for example, keys between Aa - Bf will be stored on node 1, Bg - Cf will be stored on node 2 and so on. Another approach is to partition using <strong>hash of key</strong> where the hash function produces a uniformly random value. </p>\n<p>Another approach is to use <strong>dynamic partitioning</strong>: when a partition grows to exceed a configured size, it is split into two partitions so that each partition handles approximately half of the data. This is similar to how a B-Tree handles node splitting. </p>\n<p>Now as you can imagine, the data is partitioned on different nodes and is usually moved between nodes as data is added or deleted, we need to be able to know at all times, the location of each piece of data. This process is called <strong>service discovery</strong>. To solve this problem, there're 3 approaches:</p>\n<p>(1) Send request to all nodes and the node that has the data will respond\n(2) Send request to the one node that has information about all nodes and have it forward your request to the correct node\n(3) Have client maintain this information on its end.</p>\n<p>Many systems rely on a separate coordination service such as Zookeeper to keep track of cluster metadata. Each node registers itself in Zookeeper and Zookeeper maintains the mapping of partitions to nodes. So, whenever any mapping information is updated, Zookeeper informs the routing tier that can then update its records:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 690px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 42.51336898395722%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAABcSAAAXEgFnn9JSAAABTUlEQVQoz1WSWY6DMBBEuf99coPJz+Qry0iJIrGYxRgwJGxmUcI8sCbStCzA3VXl7jLOsix1XT8ej/f7vfxFVVXFFq/Xi23XdTJJjDG6KPq+J58pNU2TAy2V8vl8WlrTNGiFIoyiyPd9cCTLsrxer9CEH3RtGwSB67rjODqUz6fzz+WCBLiv/X6324Emjy4tkGzbNk3TeZ611uMwUMqzbIJMypgBdFVWdH48Hg/fB8qcrFIlhJjmGRXPdQdjbPNSyiSOVzI0hCkrpT6Ty0Te73exBRJFoW+3m6HtQDA/Sc/zhmFwkLH2lFrX2+TwIas0ZSVxYh2FADrLFE9GoIV1ZqyyJ2MVlljb4BR5jqXMwhZMGIa96TOVQaZHjlzJzMCLJ1nct2S0Ph3ZK4ijGACKgFfD8ny9qlCIagvrIR+lxocSwubiulZfmnb5H/wCv2/x+LIOrUOMAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Zookeeper\"\n        title=\"Zookeeper\"\n        src=\"/static/6392fa910da02d696843c97728c91667/1dda8/zookeeper.png\"\n        srcset=\"/static/6392fa910da02d696843c97728c91667/27f03/zookeeper.png 173w,\n/static/6392fa910da02d696843c97728c91667/376d0/zookeeper.png 345w,\n/static/6392fa910da02d696843c97728c91667/1dda8/zookeeper.png 690w,\n/static/6392fa910da02d696843c97728c91667/3a850/zookeeper.png 748w\"\n        sizes=\"(max-width: 690px) 100vw, 690px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span> <a href=\"https://www.amazon.com/System-Design-Interview-insiders-Second/dp/B08CMF2CQF\">Image Credit</a></p>\n<p>Cassandra and Riak use a different approach called the <strong>gossip protocol</strong> to disseminate any changes in cluster state. Requests can be sent to any node and that node forwards them to the appropriate node for the requested partition. This comes at a cost of added complexity but removes dependency on external coordination services like Zookeeper. </p>\n<h3 id=\"caching\"><a href=\"#caching\" aria-label=\"caching permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Caching</h3>\n<p>So far, we've improved the availability and reliability of our system. We can now concentrate on speeding up our architecture by improving latency by improving response and load times for our web-page. Now, as you can imagine, querying the database for the same information over and over again can be quite expensive. For example, let's say we perform a join on a few tables to render on each user's page the most frequently visited part of the site for a particular day. Getting this information for each and every site visitor is expensive. Since this information does not change frequently, we can look up this information once and then <strong>cache</strong> it for future use. This will improve the performance of our application. </p>\n<p>The <strong>cache tier</strong> is temporary data store layer that lies between the server and the database. If the information we want is present in the cache tier, we'll grab it from there, otherwise we'll query the DB, store this information in cache and return. Retrieving data from the cache tier is faster than querying the database for the same information. In addition, using the cache tier will also reduce database workloads. We can use Memcache, Redis etc based on the data we're caching. </p>\n<p>Here's a possible cache tier setup:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 624px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 14.262820512820513%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsSAAALEgHS3X78AAAAxElEQVQI122OPU7DQBhEfTBuwi1oOQQFNV0ugBBQg4QoEkTjJEKKiJO1La/t/bG/ZZ2keaxCy0hPmmaeJrtf3mCDobWafb2jaksq/UdRFdRakW8VDwuFTCf+i5EDs5cNQzyS3c2v0M6hjUE1TRK2SaYpE3XXE6fA4+Kbi+tn8qIj/ER6N2IHofcjEoR813F5+4b2E9nn6h3vB0YRjLU473HOY60jxun8YBiFr82Ww/HEXqXH+ZLVen3uknZl3fD0+pEcgV91xdxMN/K/owAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Cache Tier\"\n        title=\"Cache Tier\"\n        src=\"/static/02f1d64457feaf633353aab801e7dca3/24590/cache-tier.png\"\n        srcset=\"/static/02f1d64457feaf633353aab801e7dca3/27f03/cache-tier.png 173w,\n/static/02f1d64457feaf633353aab801e7dca3/376d0/cache-tier.png 345w,\n/static/02f1d64457feaf633353aab801e7dca3/24590/cache-tier.png 624w\"\n        sizes=\"(max-width: 624px) 100vw, 624px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span> <a href=\"https://www.amazon.com/System-Design-Interview-insiders-Second/dp/B08CMF2CQF\">Image Credit</a></p>\n<p>Not all types of data can be stored in cache! Let's look at a few pitfalls when using caches:</p>\n<ul>\n<li><strong>Type of data</strong>\nSince cache data is read once and then stored in cache tier, it is not advisable to cache data that changes frequently. The ideal candidate for cached data is one that is read frequently but updated infrequently. It is a good idea to set an expiration policy where the cache is <strong>invalidated</strong> and the data in cache is refreshed by performing another read of the DB. </li>\n<li><strong>Inconsistency</strong>\nEven if you set an expiration policy, your cache data might be out of date therefore it is important to keep cache and data store in sync using TTL.</li>\n<li><strong>Eviction Policy</strong>\nOnce the cache is full, we'll have to start removing content from the cache. To do so, we can use something called LRU (least recently used) cache eviction policy where the least recently used data is removed from cache.</li>\n</ul>\n<h3 id=\"cache-types\"><a href=\"#cache-types\" aria-label=\"cache types permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Cache: Types</h3>\n<p>There are several strategies where the choice to pick the correct strategy depends on your <strong>data access patterns</strong>. For example: do you have more writes than reads? (ie time based logs), do you have write once and read multiple times? (ie think user profiles on Facebook), do you have a combination? (update and search data). Depending on your use-case, your caching strategy would evolve. Let's look at the various types of caches available.</p>\n<ul>\n<li><strong>Side Cache</strong></li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 690px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53.34207077326344%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAACcklEQVQoz2NgYGDQAGJDIFYGYh0gNgViViBmCIqIYoCB4/93sMDYSzzfMOADzFADWBn4GUGYjcGOhTH0RCxDgvBWJpCCebLf82fz/r4/R+LHxCP/d4HFFtl8YCALLAm/rz6T48/fOQz//y9j+v9/gd5nd5D4HNGfTFg1MOmzQj3IwMAyV1CcYRaHJMNMJlG1xXqKZhsNdCrmNagtEP55dSXQsNlc/94vtHqvDna1/HdGrAb+XSjJ9GueIPP/2exMAiUMTC4bnDkq92ZI1OzOkGBYZM/6/z8D097cPbatstfrm40PO4D0NDLeBhumXf4EbIZW+WNGrfInLEDMjGK45Nf/bPMO14tt3dPLDuIDQ4njbnCE6WFOBolKQQbhJn4GYZD4iSgpxjdzFjH8X57LUN56FNWlf1YYBPxfLO/zbLVF9uP1Dq7Ici/nzJZ6NmMSO6FwVi1/ZqZd8XgG0IWtDP8X8vz/PxcU4gz//82T2H9l1X/OVzO6xF5On6b7ICND/bq1tfwtHx+Fa+7uitfd3BRv2Nmp3ouNlXy9bDnfmYkLhf7/YWAxrbxfCDTsJdDQSwz/5nD9/j+d4fd/YDT+mSt94OncQ+qvZkzUfjl9qtiDzEyx+4mJcvdTUqTvp6aC8d2oKPlHhYUSr+YvELw2Zb7I/+0hXJZV95I0y5+sARo4j+HffKHf/2ez/f6/kP3/3wVSm8hJWmrlT921K56s1Kp4Mp1hfbWB2/JSXf9lJbpBe1qMtUEKtlelMb6aMZnhYV4ew/2kJMb7aWmMD9LTGYFBwHg3OprxUXExw5v58xmmpKWAI8RclY/PwNpL19DKQxEA213y1G8yMX0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Side cache\"\n        title=\"Side cache\"\n        src=\"/static/c6a2425e60d48e817d76a0be14bf785d/1dda8/cache-aside.png\"\n        srcset=\"/static/c6a2425e60d48e817d76a0be14bf785d/27f03/cache-aside.png 173w,\n/static/c6a2425e60d48e817d76a0be14bf785d/376d0/cache-aside.png 345w,\n/static/c6a2425e60d48e817d76a0be14bf785d/1dda8/cache-aside.png 690w,\n/static/c6a2425e60d48e817d76a0be14bf785d/76400/cache-aside.png 763w\"\n        sizes=\"(max-width: 690px) 100vw, 690px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span> <a href=\"https://codeahoy.com/2017/08/11/caching-strategies-and-how-to-choose-the-right-one/\">Image Credit</a></p>\n<p>This is the simplest of them all: the application, before calling the DB, checks the cache to see if there's a cache hit: if so, application returns the data. In case of a cache miss, the DB is queried, cache is updated and data is then returned to the application. If the cache goes down, application can continue to query the DB.</p>\n<ul>\n<li><strong>Read Through Cache</strong></li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 690px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 31.323722149410223%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsSAAALEgHS3X78AAABlUlEQVQY02NgYGAwBWI1IFYAYg0gNmZgZBBjAAFxBoaJ4RcZJjP8ZwRxJwHp1X73GP5PYmD4HxXMsDargwEDbGt1411QbM73eV0o14IaRw4GBla2/wzbMNVtu8wG5/z/D2eG3/rPoF3+WE2r4om1VvkTUYb/C8Tu/J/LdfvfHK73/xdJ14AU6U5iYGeoZ2BhSAdiIJgr+bNtNs/vx3MkfzaB+DMY+IEubgS7WqXwgSjQsJtAQ/9qlT9eyPBvDsf/f9OBdi5i+P9lkewyhhcf+X1WGWt7LvfSVL3DLNcTe8h3EdP//3OAShaw/P+/P/p47Ie2JLN7ZQ32H8vzHWbXr7LUKH8yXbv80VygoXUM/5fyAVUy/v+/hvH/n0VS88E+2ubH8n/lf2YQe1XEc+nZ3H8eLAUqmcPz7/a2xCuK/yf6cl8p7RD6XxPKHVt/QVKr8sUKrcrnB4G4geFWv3LD1S659mvdsn3Ppmu4gAzp8GYAe8eC4QQkMqyuaHYoXWiqtlhnjBG4XH6MeqE9Vroxc131gjvUAGNEouFdEErHAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Read through Cache\"\n        title=\"Read through Cache\"\n        src=\"/static/6f6b76685ece0e223e0e8bc719473b2b/1dda8/read-through.png\"\n        srcset=\"/static/6f6b76685ece0e223e0e8bc719473b2b/27f03/read-through.png 173w,\n/static/6f6b76685ece0e223e0e8bc719473b2b/376d0/read-through.png 345w,\n/static/6f6b76685ece0e223e0e8bc719473b2b/1dda8/read-through.png 690w,\n/static/6f6b76685ece0e223e0e8bc719473b2b/76400/read-through.png 763w\"\n        sizes=\"(max-width: 690px) 100vw, 690px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span> <a href=\"https://codeahoy.com/2017/08/11/caching-strategies-and-how-to-choose-the-right-one/\">Image Credit</a></p>\n<p>As the name suggests, read through cache is placed between the application and the database. This means that the application ONLY interacts with the cache and NOT the DB. Any cache misses are populated and cache hits are returned. For example:</p>\n<p> (1) Given a key-value pair, the application first tries to read the data from DB. If the cache is populated with the data (cache hit), the value is returned. If not, on to step 2.</p>\n<p> (2) Transparent to the application, if there was a cache miss, cache fetches the key-value pair from DB.</p>\n<p> (3) To make the data available for any subsequent reads, the key-value pair is then populated in the cache.</p>\n<p> (4) The key-value pair then returns the value back to the application.</p>\n<p> If cache goes down, access to DB will also be lost. Disadvantage here is that on the first request, since the cache is empty, you'll have to query the DB so the first request will always be slow. Read through cache is a good use case for <strong>read heavy</strong> work loads.  </p>\n<ul>\n<li><strong>Write Through Cache</strong></li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 690px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 31.323722149410223%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsSAAALEgHS3X78AAABi0lEQVQY02NgYGDQBWJVIJYBYi0gNgFicQYoWOr3hmESw39GEHsykJ7mcYWBgYmBwUZFjkHfI5sBA9xaEMK9qsqK9858P+5VNY7sQCE2mFyWbR8jjL1lxxk2BizA0CGMUav8sZpWxRNrIC3K8G+B2N3/c7lu/5vD9e7/Etk6sEtiOdkcTV1YYJrmSf5qm83z5/F8yb/NIL6JsDuzqUM82ALN9v9CQMNuapc//qtV/mQhw785HP//TWf4/38xw//PM4TnMjA0iDhZaGpYGtlqMFgzsNeab/Sbz/r//yygkhnsP//XWK7z5TFgkDE3dtAx1pBU1A+o19cuvTcb6Lo5WuWP6hj+L+X7/38+4///a5n+/5kvPgfsvTQG1nSLRmYQu8v9gMJMnl8PlwCVzOT9eXuq7wVpkHiY22KwvG7KRkmtyucrgfggEDcw3OpXbrjaJdd+rVu279kMLVeQov8LGMBh9x8IwUFgdV2zQ+lCU535ZmMQf5XYf3jY6qTvYtQL67XSjZnrqhfSoQYAgeGPOo7MPhQAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Write through Cache\"\n        title=\"Write through Cache\"\n        src=\"/static/e9becdf51ce8828e9cd89bb5a6aae481/1dda8/write-through.png\"\n        srcset=\"/static/e9becdf51ce8828e9cd89bb5a6aae481/27f03/write-through.png 173w,\n/static/e9becdf51ce8828e9cd89bb5a6aae481/376d0/write-through.png 345w,\n/static/e9becdf51ce8828e9cd89bb5a6aae481/1dda8/write-through.png 690w,\n/static/e9becdf51ce8828e9cd89bb5a6aae481/76400/write-through.png 763w\"\n        sizes=\"(max-width: 690px) 100vw, 690px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span> <a href=\"https://codeahoy.com/2017/08/11/caching-strategies-and-how-to-choose-the-right-one/\">Image Credit</a></p>\n<p>Similar to read-through cache, write-through cache also sits in line with the DB and the cache is updated as data is written to DB. Here're the data flow for a write through cache:</p>\n<p> (1) For a given key-value pair, the application writes to the DB.</p>\n<p> (2) Cache intercepts the write and then writes the key-value pair to DB.</p>\n<p> (3) Upon a successful write, the cache is hydrated with the new value so that any subsequent reads for the same key-value pair result in a cache hit. If the write is unsuccessful, the exception is returned to the application.</p>\n<p> (4) The acknowledgement of a successful write is then returned to the application.</p>\n<p> Write through and read-through caches can be deployed together to simplify the use of caches. Because a write-through cache automatically caches the update, there's a slight amount of latency for writes. However, the advantage here is that data that is written is also immediately available for reads! Think about it: you have a DB that stores title and summary of new books that you publish. Say you've published a new book and on the landing page of your website you have a huge banner advertising this new book. Before you push the banner to your site, you update your DB with the book title and summary. As soon as you write to the DB, your cache is updated (since it is a write through cache). Now when millions of users flock to your website, they request this new book and its summary which is returned from the cache and NOT the DB. </p>\n<p> Therefore, <strong>write-through cache is advantageous for read heavy workloads</strong>. </p>\n<ul>\n<li><strong>Write Around Cache</strong></li>\n</ul>\n<p> <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 690px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 30.219146482122262%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA/0lEQVQY03VQPUsDQRC9wr9la+kv0TKFpBUtBMVWERtRsZVY2KiVQgS7FAcGRE0uMbe3H7d7e7s7s84KXmFweDDMzHszj8niUiAm/BaA4JTkUlQRPCJQDyhhomTx38DQCGeYM9zrMsEIp5m3smP8FfuA4znmRfwSgU7Bj4dpG6cuTQPQZbh7zvunD5+LOtO6ZowppYSklaEQ2DsvN04mZ482tpVWrJHq4mo8uH4DI2o+I/Hm3uXK2vbgKc+MMSTmnJclo8FH5dYPR6s7L/u3RXIevLF+62CyezwnDxA8feF+OOof3by+z7Klb6HQ7UJZ63zXNGAtuo7gWxtcY3T9DRbvT0Fshbo+AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Write Around Cache\"\n        title=\"Write Around Cache\"\n        src=\"/static/b9b36f9b0fde5521fff302d20eb713fd/1dda8/write-around.png\"\n        srcset=\"/static/b9b36f9b0fde5521fff302d20eb713fd/27f03/write-around.png 173w,\n/static/b9b36f9b0fde5521fff302d20eb713fd/376d0/write-around.png 345w,\n/static/b9b36f9b0fde5521fff302d20eb713fd/1dda8/write-around.png 690w,\n/static/b9b36f9b0fde5521fff302d20eb713fd/0b7a7/write-around.png 867w\"\n        sizes=\"(max-width: 690px) 100vw, 690px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span> <a href=\"https://aws.amazon.com/blogs/database/amazon-dynamodb-accelerator-dax-a-read-throughwrite-through-cache-for-dynamodb/\">Image Credit</a></p>\n<p>Some workloads in the IoT or ad tech space have a considerable amount of data that is written once and read never. In these scenarios, it often doesn’t make sense to use a write-through cache. If the cache is populated with data that is never read, it usually means that the utilization and cache/hit miss ratio is low, reducing the utility of the cache. To work around this issue (pun intended), you can employ a write-around pattern in which writes go directly to DynamoDB. Only the data that is read—and thus has a higher potential to be read again—is cached.</p>\n<ul>\n<li><strong>Write Back Cache</strong></li>\n</ul>\n<p> <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 690px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 17.14898177920686%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAsUlEQVQI12WMsQrCMBiE+wA+mZubD+Ciiy/g6Ka7U3EQFCfBoWNBEAQFq1BFhRZLaVNtq8QKJumf/AZXj7tvueMM/JOU6kLULkDyVKhASc1yGbESQEKpB84paPTney8xKKVxHBNCsizTVLJ8c2yPbrWeZy4oy30E6mxps+Wej5S/AoRibK0q1e7Edg0A4D8JIRjj+vgjZGd2rQ8O0/UdUWmHOZj2Iy10CTpRkg6tjR8mXy3Pn38bJg+wAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Write Back Cache\"\n        title=\"Write Back Cache\"\n        src=\"/static/5dcd7d3e754504c7c99feafbffd5efb2/1dda8/write-back.png\"\n        srcset=\"/static/5dcd7d3e754504c7c99feafbffd5efb2/27f03/write-back.png 173w,\n/static/5dcd7d3e754504c7c99feafbffd5efb2/376d0/write-back.png 345w,\n/static/5dcd7d3e754504c7c99feafbffd5efb2/1dda8/write-back.png 690w,\n/static/5dcd7d3e754504c7c99feafbffd5efb2/dbb86/write-back.png 933w\"\n        sizes=\"(max-width: 690px) 100vw, 690px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span> <a href=\"https://aws.amazon.com/blogs/database/amazon-dynamodb-accelerator-dax-a-read-throughwrite-through-cache-for-dynamodb/\">Image Credit</a></p>\n<p>Whereas both read-through and write-through caches address read-heavy workloads, a write-back (or write-behind) cache is designed to address write-heavy workloads. In this scenario, items are written to the cache and then asynchronously written to the underlying data store. The process is as follows:</p>\n<p>(1) The item is written to the cache.</p>\n<p>(2) The item is acknowledged by the cache, and success is returned to the application.</p>\n<p>(3) As a background process, items are de-staged and written to DynamoDB.</p>\n<p>(4) The cache acknowledges the write.</p>\n<h3 id=\"content-delivery-network-cdn\"><a href=\"#content-delivery-network-cdn\" aria-label=\"content delivery network cdn permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Content delivery network (CDN)</h3>\n<p>While we're on the topic of getting content to users fast, it is apt to talk about content delivery networks or CDNs. A CDN is a network of geographically dispersed servers that is used to deliver <strong>static</strong> content. CDN caches static content such as images, CSS, JS and HTML pages that are then delivered to customers close to the server in the CDN. CDNs help improve site load times. Examples of CDNs are Amazon CloudFront, Akamai ImageManager, Fastly IO, PageCDN etc.</p>\n<p>Here's how a CDN might work:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 600px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 31.83333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsSAAALEgHS3X78AAABPElEQVQY03WRuU7DQBRF/XH8Fj+AxD9QIoo0dDRIFPSBhC2bEyexPePdTmwnHh/eJIgGUVzdkWbu8t44WmvexmM+Zi6urxlNl6wCTb6rKfcNadvRmY6qqkjTFK0jojhGiS5UijhOCCPF0+wWVbo4XXd+TG+o65pERHNvw9LbcjMvufYMd/6Br7gkzzKUGESJGCcJSZ6zk9C1Drl8uGAUPOIYYzgej9JCuDMU1Z60KAmTnGe1Z7DMuN/WTFRGJK02fkCgtEBR7vai6amaisHwCjd+xbEju4sF85UnzXzGn1PepwuirODYNpSSTrNDRqDvezidzrAlbKGmaVh5S4qiwAnDkJfhkMlihbv28UOFjiIOhwNGDE5C4ZNY1mNX9Ms/hhY2qzc9Ttu2stj4PLbgnG0vjYjMH+F/sB9n+RvVGseSNV4edQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"CDN\"\n        title=\"CDN\"\n        src=\"/static/d8163bbdd9b6c15043b69744f1ac88a3/3f01f/cdn.png\"\n        srcset=\"/static/d8163bbdd9b6c15043b69744f1ac88a3/27f03/cdn.png 173w,\n/static/d8163bbdd9b6c15043b69744f1ac88a3/376d0/cdn.png 345w,\n/static/d8163bbdd9b6c15043b69744f1ac88a3/3f01f/cdn.png 600w\"\n        sizes=\"(max-width: 600px) 100vw, 600px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span> <a href=\"https://www.amazon.com/System-Design-Interview-insiders-Second/dp/B08CMF2CQF\">Image Credit</a></p>\n<ul>\n<li>User 1 requests an image that is not found in the CDN. The image is requested from <strong>origin</strong> (or the main server)</li>\n<li>The image is then stored in the CDN</li>\n<li>The image is then returned to the user</li>\n<li>User 2 requests the same image from the same geographical location. The image is found in the CDN and the image is returned to user 2 faster.</li>\n</ul>\n<p>CDN content comes with a <strong>TTL</strong> or time to live that describes how long the image can be cached. </p>\n<p><strong>CDN Drawbacks</strong></p>\n<ul>\n<li><strong>Cost</strong>\nCDNs are run by third-party providers, and you are charged for data transfers in and out of the CDN. Caching infrequently used assets provides no significant benefits so you should consider moving them out of the CDN.</li>\n<li>Setting an appropriate cache expiry: For time-sensitive content, setting a cache expiry time is important. The cache expiry time should neither be too long nor too short. If it is too long, the content might no longer be fresh. If it is too short, it can cause repeated requests to the origin servers thus making the CDN useless.</li>\n<li><strong>CDN fallback</strong>\nYou should consider how your website/application copes with CDN failure. If there is a temporary CDN outage, clients should be able to detect the problem and request resources from the origin.</li>\n</ul>\n<p>Here's the complete diagram with CDN and cache added:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 690px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 95.06346967559945%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAAsSAAALEgHS3X78AAAC00lEQVQ4y41Uy04UURDlF41/4dbojq0bf8GFURYkKgmiCxNZSGKIE9HoMAxMRmaAefX0+30ffftYt5pG0InQSc2t6Vt9bp2qU3etrmu0j/XZyK9qazW0aczQO7tWpr4R2/iN0S/W2k2lFG9qYzDxAkR5iVQqZEojkxpBlvOakMmqukSwSKYx1PyKAfv9Pra3t+H6AXICSIoCeZpgdHoKJSWkFDg87EIryQcGhSBfIS4lNmYKO66GIwwndAW4tbWFueMiLiQUHeV5Ln52u4ijCGVZotfrIYljpu2mOUoh4CQFPkxivD2L4MprgC1t+1g6sVDIidoyLVBQxn5WcDbWT6gMQv+hbMocMomYdt0CGqJREZAFDcMQk9kMF7M5Fp6PqCixDEL+by1OUo6z8VVlYHtkczOXCV0BttYEVvYlBGX5+EUH+8dzarlEnue8dz3+ejIrATnA8JmIqdPrm9/w8fsYSehhvliwGv6Ot/Z/QJYFKEMDTZmVQjcKsTW73L8zoKZgoQ3czMHJYkBdBaahg7E/RKk1lD1sRRIrAWtbNy154/N4E5s/1tnvznfx/OAh+3GWwfd90qa8G6DUimoInMy/oDN+x0Hnfh97g1c8dilpMiY9trXkTt9G2WpxtvQxOD8j6iSjpYvj8YgklPKktLptpWPt1qakNF42m6nnYRF5cBMPE39C/gIe+ULJdiSY2UrAVk9JXsAJEwatOGvD4H6a0mjGWCYuAU+wS/P96OUBpn7eNKqubwLaDgZZiZ2vIzhxRteXQansqGlSpcHxNEBnuKQ6N7T3+yPcf/Ieo0X0LyBnRx8N5zHuPf2E3nkARUAXMwdHgyGkKLCx9wsPnnUgKs3xJU1OnoR0Iwme4/omIGVoKkR0IbzZO8J04VJtmjFs78rD8RKvaS8i6pPpFAmt7fcra2ipCfq4yGJEJA2hGiG3Zu/FlG6WKM2YXjv312f5N387uewNFPTeAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Complete with CDN and Cache\"\n        title=\"Complete with CDN and Cache\"\n        src=\"/static/326c713d0affd2b939768448ba5586a8/1dda8/complete-with-cdn-and-cache.png\"\n        srcset=\"/static/326c713d0affd2b939768448ba5586a8/27f03/complete-with-cdn-and-cache.png 173w,\n/static/326c713d0affd2b939768448ba5586a8/376d0/complete-with-cdn-and-cache.png 345w,\n/static/326c713d0affd2b939768448ba5586a8/1dda8/complete-with-cdn-and-cache.png 690w,\n/static/326c713d0affd2b939768448ba5586a8/1d6db/complete-with-cdn-and-cache.png 709w\"\n        sizes=\"(max-width: 690px) 100vw, 690px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span> <a href=\"https://www.amazon.com/System-Design-Interview-insiders-Second/dp/B08CMF2CQF\">Image Credit</a></p>\n<p>In the diagram above we have plenty of improvements over our single server setup:</p>\n<ul>\n<li>Static assets are directly fetched from CDNs that are located close to the end user</li>\n<li>A load balancer is able to scale up/down our backend based on demand and is able to route our requests appropriately</li>\n<li>Database load is lightened by caching data</li>\n<li>Data stored in the database is replicated across followers so that reads are faster</li>\n</ul>\n<h3 id=\"web-tier-and-statelessness\"><a href=\"#web-tier-and-statelessness\" aria-label=\"web tier and statelessness permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Web Tier and Statelessness</h3>\n<p>To understand statelessness we must first understand what stateful means. In a stateful architecture, a user's data is \"remembered\" between sessions. For example, say a user connects to server A, updates his/her profile, and then disconnects. The next time user A re-connects, he/she needs to be re-directed to server A since that is where user's latest information is. Example:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 690px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.53588516746411%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAACAklEQVQoz21TTYvUQBScf+lP8Ow/8b4XwbPgRQ/CigiCLCwzO4Lgyi4sSczHdNKdpPPZScp6rRnJroFHp7tS9eq919mBj9YaQRBgmiYsy+JjnmeBUNc10ixD0zR+L+crVhQFwjDc8HYCyOFhv4dz7gkpVwrH441P+hgTE4fDwfM2gm3XoaSTlfDP4YK+H5CpfHO+Clq6NtWW5wWzk0JR/U+QDguN3NQbdyuWpBl0ZZ8K5uxFUf4hPXZhyhJKl/gLbpJpY86Cgkns7OhgWFZSNmjGCe3ozqSG72U/Ii4t5Ds7uHOy1k0wnfAsORPqYcQsghXF0sygMBY9p6UpMJEwyjs/ynXl8brtPCbnbpphKK5ZVZwUqNoWlgkkKR0u+HL3DsfoCiMrUW3vBYeJzgfgR3rEx9s33r1qBy8oYYYFD8Ud3n9/RXc9SiaoRVDKf339Apc/L3wrKoJOBN3IGQPX4VtcfH3uMSlTxCSZI3ifX+Hl52fs3YSJe+9woK1v0Sfcn244KgqyBWvJli4ifYtDeOnvWu1LXrEZeR1hH3zAQBM98YYJd0ma4hSfcEoYaQLDXomguIx4ndIogWKf4ihEkhd0shBbkGiDX0FETCMKA87AUHDGLuPYY/4FEhmbXLCHiyfNUE2HrKqQmJJrjcy2PplMWXc9lG2Q8lrlXFXTshUzfgPSZJwI19ysDQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Stateful\"\n        title=\"Stateful\"\n        src=\"/static/25cca893f174729314fa4790311f032e/1dda8/stateful.png\"\n        srcset=\"/static/25cca893f174729314fa4790311f032e/27f03/stateful.png 173w,\n/static/25cca893f174729314fa4790311f032e/376d0/stateful.png 345w,\n/static/25cca893f174729314fa4790311f032e/1dda8/stateful.png 690w,\n/static/25cca893f174729314fa4790311f032e/44348/stateful.png 836w\"\n        sizes=\"(max-width: 690px) 100vw, 690px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span> <a href=\"https://www.amazon.com/System-Design-Interview-insiders-Second/dp/B08CMF2CQF\">Image Credit</a></p>\n<p>Now if user A's login information is stored on server A, then to authenticate user A, all his/her requests need to be routed to server A. The issue here is that the same client must be routed to the same original server. This leaves us at a disadvantage that prevents us from scaling down or up since the server needs to stay up in-case user A logs back in! This also makes it difficult for us to handle server failures. </p>\n<p>A better approach would be to have <strong>non-sticky</strong> sessions where no user information is stored on ANY server. Instead, user information is kept in shared storage in the <strong>data tier</strong> that allows us to fetch user information whenever he/she logs in. This is called <strong>stateless</strong> architecture:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 690px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 86.33177570093459%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsSAAALEgHS3X78AAAB9UlEQVQ4y5WUTY7TMBTHezfEghNwAhasWHCE2XIANkiz4BAjMUJCLKAdzWKKGNKCRjSVmzhJ48n3l+M/tlunSYZqOpYSO37PP//f83MmQgj0m/ke9/+zj22qTdQrSRI4joMoivRk27baWfWq5XkOQgiyLBvYzUMphed5qOt6BwyCAPP5XE5SvYBzrhcZYBiGmE6n8H2/Ax7sAouFBcuyDkDeNCAbF/dxOgjNAKuqwl97jbIsO6BpXI7tDUXI2C7kfi7SoobPYhCHopGbqN1VU6G6AevBhE4PDUKwtEDD2842MUqMI5dGVzraUnFR1TtgmmBFnE7VlkW4W2+Q5IUKpYtG9Z1CAzVqVShxViCIUmQlh8dK1FI0vY/1vDnffj4fAMfgVnDkFbCgt5jZF7gh35DINLaiHaw5qrAP3D2AnxJ8vH6L89kbfJi+xtK/gkqZaPlw82PAA5TrkCzvCmeXz/D++yvZP8fl8nwfanOawm6soDJR29TH9d0FfthfcLP6BDdeoVEKRftEoOzVwaRFBY8yWfQMjKUaVsvCPzmHY5VcjvO6gu36qOR3zZvj/o8pNDeirkrYxN3foId+jwPFsLbKqsEfspWF3uhCHtfeSSHrHO6v1Oy3jxdnnzFb7n4O6qqNfZ8E/GkzvHz3Fb/WbP83Og78BxYKKcHXEJZBAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Stateless\"\n        title=\"Stateless\"\n        src=\"/static/29ff6f7b6691f216093da54a83b4dd87/1dda8/stateless.png\"\n        srcset=\"/static/29ff6f7b6691f216093da54a83b4dd87/27f03/stateless.png 173w,\n/static/29ff6f7b6691f216093da54a83b4dd87/376d0/stateless.png 345w,\n/static/29ff6f7b6691f216093da54a83b4dd87/1dda8/stateless.png 690w,\n/static/29ff6f7b6691f216093da54a83b4dd87/0d271/stateless.png 856w\"\n        sizes=\"(max-width: 690px) 100vw, 690px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span> <a href=\"https://www.amazon.com/System-Design-Interview-insiders-Second/dp/B08CMF2CQF\">Image Credit</a></p>\n<p>As you can see above, our users can be re-directed to ANY server which will then fetch state data from a shared data store. As a result, state data is kept out of web tier which makes our <strong>web tier stateless</strong>. </p>\n<p>Now, our overall picture with a stateless web tier looks like so:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 690px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 95.41511771995043%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAAsSAAALEgHS3X78AAADLklEQVQ4y3VUW08TQRTu//MP+AN8Qx+Mf8FnTYzxgQBqjI/GRKPBeMELBFrUaE1FKAW20NLL7G12Z6+z+3nObFsK6Elmd+fMmW+/c61hTsqyRJTlkEmKSBeIco2Q9nFRmsXfidZsaGz5ffF+LcsydLtdZFlqlCPPh+f7CFQEFcdGJxwXNi2+LtMMUxiCxnGkEeTFTFdrt9tYXlrCj2aLGBQIkgw6z7C3uwvLsoxRp9MB27H4dO5HKZI4xXcR4e5RjmcD0tFdAyilRKPRgG07YJ0iV1EWOO71MRqNjFvCtiHGY3YKktxOKRSa7GJd4s/AxpEbVgzZ5fkYaIqPHYRwwwgjqci93MTtxKYwRAkc0vP+nJA3KPRZDPlRFBXdJEkghMDpYAjXddG3JQ4GDlzPw3A0huN6M9tymhjDG7Pv2kx5IWMsK+/auHZ/nX4UI44ipGl6yfYc8JShKYNJDAqirycsNnb6ePpxj9gSS8eBL/0JH+B/RGoTHCPF3GEQ59O7iLO5WptjdZHdGUNUm4Qy93uwCTsaoutYaJ1uQWUx6kfvqZxC7AzrEOEA+YXozLOcAeqSF/Bo+zra4zp2x1/w5NstAvRwb/0qglRgpXEDbbEJbpaxoCRRGJRS/2bI7sZ5ju3OKsbyBH3nAN8O3iJKA2y0nyGIPNQ7r0h/SHUIhCpERIniTrsMOElKQoCCak5RF6g4wVB42LN62PlzSKUTEKMAklryrNFwKUG1f2WK95nOoXhI0PJCH6ejgalDFSTI06pTyjngojjnMkwMWRhEEjsunYCGQ07vnCdNmsBVHoS0iakLJak2A+5p7v3ifNnEuhpTPy0be6fVVOH9WusEPepTbWwKc35kk9tpSKwdWhKxShES+P6hgKShYQAVxY4Z3Vz5iqXVXxj2j9E66OPqnQ283NrHcdeC1RtiYbGO542uYdITAa7cXkXTqgjw2eO1/SmgpiwXWCawz81qZAlX4uGbJtonwlQBZ/PBix/41KwAhR9j4f4HtIg1y+Lrn9ikzjKAPJkjuuB7DmTgm3oMqb58z0YQhmafkhfSd+hHriHAIy6hmPKb8xD6LjQN6b+BA62Ezgtc2AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Overall Stateless\"\n        title=\"Overall Stateless\"\n        src=\"/static/2f1047f1f06cdb62f273283f639467b5/1dda8/overall-stateless.png\"\n        srcset=\"/static/2f1047f1f06cdb62f273283f639467b5/27f03/overall-stateless.png 173w,\n/static/2f1047f1f06cdb62f273283f639467b5/376d0/overall-stateless.png 345w,\n/static/2f1047f1f06cdb62f273283f639467b5/1dda8/overall-stateless.png 690w,\n/static/2f1047f1f06cdb62f273283f639467b5/a0800/overall-stateless.png 807w\"\n        sizes=\"(max-width: 690px) 100vw, 690px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span> <a href=\"https://www.amazon.com/System-Design-Interview-insiders-Second/dp/B08CMF2CQF\">Image Credit</a></p>\n<p>After the state data is moved out of web servers, auto-scaling of the web tier is easily achieved by adding or removing servers based on traffic load. We no longer have to keep servers around unnecessarily since web tier servers contain no state information and can be added/removed based on traffic. </p>\n<h3 id=\"data-centers\"><a href=\"#data-centers\" aria-label=\"data centers permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Data Centers</h3>\n<p>Now let's say this is where we are in our journey to build the ultimate fault tolerant website:</p>\n<ul>\n<li>We have CDN setup to deliver static content to our user FAST</li>\n<li>Our web tier lies behind a load balancer that uses one of the algos listed earlier to route requests</li>\n<li>Our web tier is configured to auto-scale</li>\n<li>Our state data is in the data tier</li>\n<li>Our data tier is replicated </li>\n<li>We have cache setup for better response times</li>\n</ul>\n<p>But what if our servers (both in web and data tier) located in the USA east region and there's a power outage that takes down our server farm? Our website would be down as well! How would we go about making sure that our website is immune to such accidents and is still able to load for users that are farther away from us geographically?</p>\n<p>Enter: <strong>multiple data centers</strong></p>\n<p>We'd have multiple data centers with the same setup(architecture) BUT located in geographically separated regions. For example, we could have one data center in Virginia USA and another in Oregon USA. Thinking globally, we can have another in Shanghai and another in London. </p>\n<p>Now, with the introduction of multiple data centers, how do we route our customers' requests? For example, if a user is in Europe, would the request be routed to Oregon data center or London? Obviously London! We'll do that via <strong>geo-routing</strong></p>\n<h3 id=\"data-centers-geo-routing\"><a href=\"#data-centers-geo-routing\" aria-label=\"data centers geo routing permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Data Centers: Geo routing</h3>\n<p>Geolocation routing lets you choose the resources that serve your traffic based on the geographic location of your users, meaning the location that DNS queries originate from. For example, you might want all queries from Europe to be routed to a load balancer in the London region. It allows domain names to be resolved to IP addresses based on the location of a user:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 690px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 93.91796322489392%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAAsSAAALEgHS3X78AAADpUlEQVQ4y21UTW/jVBTtX2PJGo3EGglY8AtYwGZGfGxAgAbEYjZFCM0gRqAixEdVtQxDm06mTZvGTuLYjr+f7cSfiRPHdg732U2mHeZFL/Z7fj6+95xz7856vcbNwdfRPMN8VSCnR1lR1veb65KurxobnB3+F8cxjo+PEYQh8moNNg0QhhEc10VRVYiTFJphgL8SLZYoyhIVTTEtcZaUSIpqC1oDGnT4u91dSLKCNF+Bx+C5DBedDvLlEhPfw1W3W78UE+CM5jxb4E+2wAMlhTRroq42gBw5SZJmE02aOc1wlmFVVnSdI80y5BTVjNLeplkUSOPoRcoc8GUO0zSFbtvQbAcsCDHLlzBdr56259MHyluc3bxfbzjkG5tZEWdF0UThRRk+/P4ZdBZgMU+RUZQvn69ns9lwuAn1lmL0W+ULKE6Iew/PcDmyYFkGfN/fnniVwltR+LKkxaoswF1hu1Nolo1smW9fiohHi9IO4jl41qua5+IW2NY2jkcqCgIMx8VzuYUL9RKuH9S2WXIPktI9UYBuOuiqAlrS39AdBybxHJDlbtKww6XWLROyNEZbOsJnh3fw7dP3oOgKLNPCfLFAREL1+yJ0w8bu6fv4aP91POnvwXWmYGSpav0i9RqQUYS+F+B89C8end7Dz+dfQDEV2BQBB0xmMzCKyGYufnn+NZ25i9bwAI7tw534/wd0iBvLtiglG72rES47EhTFgHkdYZrNCZyEIdChpKNzNoAsG3AcG95kUhsaN1PmgDZ5zyAhRFlGbyjC0CyMhmNSNoLnh1BGGlFgYzTW0B0IkCQVOn2Uef42urpSSorXJR485mCgaHAZI7JVqIYCs1Z6iWkYg5kmxL6CvqjCHOsQhwIGooKxYiGJs60bdrhpRMPB3gmlYVhQLQf75xJ6ilIrmVLNJosMv7WHOBZUOD5DSxjjrzapTj1AGtuIpgmJyqiS4sY2V5qDO58eXFeFg7e+OsK795/gWX9cA86WGe4+bOMNOnNOHP74j4jXPvgdPxz2oLIm5b2WhnfuP204NEjlg5Muvnx8CpWU7QxUvP35Pj5+dEomXmGSziBKMr55fIKjixEZnOHBr228+ckf6FEwfAx0Dz8dXlLp0UImkJ4oQlYk4s4iD+roCj10JQVZntfd5mooQRoRLZqGMXE7kAbo9ESY/qQpxKrk7adJOaUOzTsLm4bwgwAuNViXGuw0ilHyZkG15tOaBRE9vz7D72mP22pTvnz+B1uoiWdxeZnxAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Geo DNS\"\n        title=\"Geo DNS\"\n        src=\"/static/45860a658018c819ca58dfa9a6463762/1dda8/geo-dns.png\"\n        srcset=\"/static/45860a658018c819ca58dfa9a6463762/27f03/geo-dns.png 173w,\n/static/45860a658018c819ca58dfa9a6463762/376d0/geo-dns.png 345w,\n/static/45860a658018c819ca58dfa9a6463762/1dda8/geo-dns.png 690w,\n/static/45860a658018c819ca58dfa9a6463762/037d4/geo-dns.png 707w\"\n        sizes=\"(max-width: 690px) 100vw, 690px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span> <a href=\"https://www.amazon.com/System-Design-Interview-insiders-Second/dp/B08CMF2CQF\">Image Credit</a></p>\n<p>Now, if the data center closest to the customer is down (due to a natural disaster), requests can then be routed to the second closest data center. In order to make geo routing possible, there're a few things that need to be figured out:</p>\n<ul>\n<li>Traffic redirection: Effective tools are needed to direct traffic to the correct data center. GeoDNS can be used to direct traffic to the nearest data center depending on where a user is located.</li>\n<li>Data synchronization: Users from different regions could use different local databases or caches. In failover cases, traffic might be routed to a data center where data is unavailable. A common strategy is to replicate data across multiple data centers.</li>\n<li>Test and deployment: With multi-data center setup, it is important to test your website/application at different locations. Automated deployment tools are vital to keep services consistent through all the data centers. </li>\n</ul>\n<h3 id=\"decoupling\"><a href=\"#decoupling\" aria-label=\"decoupling permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Decoupling</h3>\n<p>Let's have another look at the system we've designed so far:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 690px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 93.91796322489392%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAAsSAAALEgHS3X78AAADpUlEQVQ4y21UTW/jVBTtX2PJGo3EGglY8AtYwGZGfGxAgAbEYjZFCM0gRqAixEdVtQxDm06mTZvGTuLYjr+f7cSfiRPHdg732U2mHeZFL/Z7fj6+95xz7856vcbNwdfRPMN8VSCnR1lR1veb65KurxobnB3+F8cxjo+PEYQh8moNNg0QhhEc10VRVYiTFJphgL8SLZYoyhIVTTEtcZaUSIpqC1oDGnT4u91dSLKCNF+Bx+C5DBedDvLlEhPfw1W3W78UE+CM5jxb4E+2wAMlhTRroq42gBw5SZJmE02aOc1wlmFVVnSdI80y5BTVjNLeplkUSOPoRcoc8GUO0zSFbtvQbAcsCDHLlzBdr56259MHyluc3bxfbzjkG5tZEWdF0UThRRk+/P4ZdBZgMU+RUZQvn69ns9lwuAn1lmL0W+ULKE6Iew/PcDmyYFkGfN/fnniVwltR+LKkxaoswF1hu1Nolo1smW9fiohHi9IO4jl41qua5+IW2NY2jkcqCgIMx8VzuYUL9RKuH9S2WXIPktI9UYBuOuiqAlrS39AdBybxHJDlbtKww6XWLROyNEZbOsJnh3fw7dP3oOgKLNPCfLFAREL1+yJ0w8bu6fv4aP91POnvwXWmYGSpav0i9RqQUYS+F+B89C8end7Dz+dfQDEV2BQBB0xmMzCKyGYufnn+NZ25i9bwAI7tw534/wd0iBvLtiglG72rES47EhTFgHkdYZrNCZyEIdChpKNzNoAsG3AcG95kUhsaN1PmgDZ5zyAhRFlGbyjC0CyMhmNSNoLnh1BGGlFgYzTW0B0IkCQVOn2Uef42urpSSorXJR485mCgaHAZI7JVqIYCs1Z6iWkYg5kmxL6CvqjCHOsQhwIGooKxYiGJs60bdrhpRMPB3gmlYVhQLQf75xJ6ilIrmVLNJosMv7WHOBZUOD5DSxjjrzapTj1AGtuIpgmJyqiS4sY2V5qDO58eXFeFg7e+OsK795/gWX9cA86WGe4+bOMNOnNOHP74j4jXPvgdPxz2oLIm5b2WhnfuP204NEjlg5Muvnx8CpWU7QxUvP35Pj5+dEomXmGSziBKMr55fIKjixEZnOHBr228+ckf6FEwfAx0Dz8dXlLp0UImkJ4oQlYk4s4iD+roCj10JQVZntfd5mooQRoRLZqGMXE7kAbo9ESY/qQpxKrk7adJOaUOzTsLm4bwgwAuNViXGuw0ilHyZkG15tOaBRE9vz7D72mP22pTvnz+B1uoiWdxeZnxAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Overall\"\n        title=\"Overall\"\n        src=\"/static/45860a658018c819ca58dfa9a6463762/1dda8/geo-dns.png\"\n        srcset=\"/static/45860a658018c819ca58dfa9a6463762/27f03/geo-dns.png 173w,\n/static/45860a658018c819ca58dfa9a6463762/376d0/geo-dns.png 345w,\n/static/45860a658018c819ca58dfa9a6463762/1dda8/geo-dns.png 690w,\n/static/45860a658018c819ca58dfa9a6463762/037d4/geo-dns.png 707w\"\n        sizes=\"(max-width: 690px) 100vw, 690px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span> <a href=\"https://www.amazon.com/System-Design-Interview-insiders-Second/dp/B08CMF2CQF\">Image Credit</a></p>\n<p>In the system above, we've got our servers receiving requests from the client. Let's assume, our client requests are simple: delivering your dynamic website. The architecture as shown would work perfectly. Now imagine if your website offers another service: processing images and returning the classification of objects found in the image: </p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 640px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 42.1875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAACHUlEQVQoz1WP+0tTARTH75/TL2FRgT9ERFAEQpkIEytRqIxI0RQqLZvCaKmbSJq4dLp8DGdaPgh1rnyk+WprRs6FztBYljJyN3fv7h6frg96fA+H7znfc+B8j7Do8zDyzs7wtIPRmdd4VxZxuqeZaH+G4+kTHN021jd9fPNN4l914l/zsLb8AUlcZc07xtSojanxPj7ODqL8+oqQUZSCJieBGsNlMh8eJ6s8mXNZhzDlnqJZn0Ze3lEetWjwtB5gwpLEZI+OoeaLWNuuMvbiGHMdiYy/tfGm+x7jz7MRimovcLMkkc/9ZhqbkrlVf5rsuwexFGnw9T6muvQwWmMqfdpMuorTsVdlUGM8S25JFgP6PLzGEgZsFppaK9AariHcN2q4UnCEEasem/k6xdWp3MhPoLYgCWe3AWvZecoqkym7dAZd4QlM1SexVKZTWJ6OLieNitsp1LXc4WVHM3qzFsE1N8aIvYvJ4S6+eN+zsjTPlKOHGWMpbpOBDccrZj8NUm/Kx9T/gMZ+HSbVTedQA+a2YqqshTTYjZg76+h1tCOwj83AT/6FvCUS9K/vNXE1t4KEQipFImzwY1dC3Cayo0kxvuNHVkOQZQlJkoioi6HQNsFgEFEUCUcUlFgUWZZ3U1IUwmEJJazWorS3p14Iq/2OFpGiKit/He4gEAjgcjpZWFggHov955h4/E+57FvC5XIx73YTjcb2n9ib/wZ7nABvP4yVvQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Image classification\"\n        title=\"Image classification\"\n        src=\"/static/a56a07bbfb940de6c1492366c8cc9d2d/70d1f/image-classification.png\"\n        srcset=\"/static/a56a07bbfb940de6c1492366c8cc9d2d/27f03/image-classification.png 173w,\n/static/a56a07bbfb940de6c1492366c8cc9d2d/376d0/image-classification.png 345w,\n/static/a56a07bbfb940de6c1492366c8cc9d2d/70d1f/image-classification.png 640w\"\n        sizes=\"(max-width: 640px) 100vw, 640px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span> <a href=\"https://www.kdnuggets.com/2018/09/object-detection-image-classification-yolo.html\">Image Credit</a></p>\n<p>Now the classification process is more time consuming than simply returning an HTML webpage. Your servers that receive request from your client must wait for the processing servers to finish classification and THEN return back to the client. Your client servers are dependent on processing servers. This makes our system tightly coupled. We want to decouple our system so that we can scale up or down our processing servers. This classification process cannot be performed by any of the services we've seen so far:</p>\n<ul>\n<li>CDN: this is only for static content</li>\n<li>Load balancer: Routes your traffic</li>\n<li>Cache: Prevents multiple hits to the database</li>\n</ul>\n<p> We need something else! Enter: <strong>message queues</strong></p>\n<h3 id=\"decoupling-message-queues\"><a href=\"#decoupling-message-queues\" aria-label=\"decoupling message queues permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Decoupling: Message Queues</h3>\n<p>A message queue is a durable component, stored in memory, that supports asynchronous communication. It serves as a buffer and distributes asynchronous requests. The basic architecture of a message queue is simple. Input services, called producers/publishers, create messages, and publish them to a message queue. Other services or servers, called consumers/subscribers, connect to the queue, and perform actions defined by the messages. We'll add these queues to the datacenter.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 690px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 17.1830985915493%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsSAAALEgHS3X78AAAA70lEQVQI1x3PT0vCcADG8Z26BdEL6aVEly5BvYeOdSqKiqC6dAi6KJFCTXYIvVhEYZA5y5gOc3OjxbTf3OjvQtT2be25fE4PPI9UbnZZOa6wLT+wmlHJlQyi0YDRcID/2adi9KjZAfeWn+i9hzjuK8IPSBV1ltNl1rIqS6lbSnUXaUfRGJvNMrWYZ2JeZnr9HOF5vHQE13qXw+ITR1dt0pdmomYLbMch8AUzGxdMLuTiboHxuVO25EcktSXYPKmyf6YlK5Ubk//8RhFv332az4JG20W3OphuQO8j5Cv8YRg/yN9Z7Co1Dgp19mKrhuAPHU7FYffI9wUAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"MQ\"\n        title=\"MQ\"\n        src=\"/static/a5618acc88ba077ddae0db18c3b8924f/1dda8/message-queue.png\"\n        srcset=\"/static/a5618acc88ba077ddae0db18c3b8924f/27f03/message-queue.png 173w,\n/static/a5618acc88ba077ddae0db18c3b8924f/376d0/message-queue.png 345w,\n/static/a5618acc88ba077ddae0db18c3b8924f/1dda8/message-queue.png 690w,\n/static/a5618acc88ba077ddae0db18c3b8924f/8551f/message-queue.png 710w\"\n        sizes=\"(max-width: 690px) 100vw, 690px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span> <a href=\"https://www.amazon.com/System-Design-Interview-insiders-Second/dp/B08CMF2CQF\">Image Credit</a></p>\n<p>Decoupling makes the message queue a preferred architecture for building a scalable and reliable application. With the message queue, the producer can post a message to the queue when the consumer is unavailable to process it. The consumer can read messages from the queue even when the producer is unavailable. If the number of messages in our queue reach a certain threshold, we can increase the size of our processing cluster to quickly process the classification requests. Once the requests are no more, we can scale down our processing cluster:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 690px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 23.10984308131241%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsSAAALEgHS3X78AAABEElEQVQY03WPy0rDUBiE83Y+hhvfxUeoS1/ArNSNKFhKVOgFLVJKa5u0mzYnNZfmck4u/Tw5pdCNA8P8/PPDzG/NgjFTMULVDQaHw5Eald6pskZVR5725wiygO/NG1GRGNvqOFd0nEuWwYx9XjN3PfxdSJIr7vsud+9L7A+Xh4HHbyoRYaRvVlpDfQ+Pkxuuny9wXNsEWN2JTW9qI1KhGx0opNJas89ynG+Pl9GS10+P3tg1QWVZkmaZbq6QFQzdLk9ft8zFmLa/tdtlCH9Poar2X137+FaR58RxRJIkWmOiSM9azyGlxBfaCyVhnFFWJZYIfLbbDWmamqOmaQz/w8lvg9u26/WKwbDPYvFjAv4AAb94DLb+o7QAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"MQ2\"\n        title=\"MQ2\"\n        src=\"/static/e08f8f7fc639119e97b4b7308384709f/1dda8/message-queue-2.png\"\n        srcset=\"/static/e08f8f7fc639119e97b4b7308384709f/27f03/message-queue-2.png 173w,\n/static/e08f8f7fc639119e97b4b7308384709f/376d0/message-queue-2.png 345w,\n/static/e08f8f7fc639119e97b4b7308384709f/1dda8/message-queue-2.png 690w,\n/static/e08f8f7fc639119e97b4b7308384709f/48606/message-queue-2.png 701w\"\n        sizes=\"(max-width: 690px) 100vw, 690px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span> <a href=\"https://www.amazon.com/System-Design-Interview-insiders-Second/dp/B08CMF2CQF\">Image Credit</a></p>\n<p>Here's the architecture (with only a single data center shown - in reality you'll have multiple data centers):</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 690px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 108.95104895104896%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAACXBIWXMAAAsSAAALEgHS3X78AAADhElEQVQ4y21VS4/bVBTur+M/8AfKDrGBHSzYwY4FEiMWRakQLHgKqa1QowpVpc2MoJkyzaSTlz2JPbav7etHnPj98V13nHiaudKRz334u9855/PxHXDUdY3uUPOKz5JPZUVVoeIRZcpX+61131HjTuuoZxiGqMoSJeeG6yHcbLHOcmzLCm4YwYsiJEWJTVHsgKKiQlZWO4wdoOu66PV6OP3vDHGaI+OLwrbwajhs9i91DfPptPG99QbZNoUebHCk53hg83z1DsMsyzAejxuWOTdTLvtktbJsbMjS9ny4MkDKkGPO1XsFz8yFhBEme4a35XCbphBBAJsAwWbTrFn0PRU2TeVxnzzl14chN4VQCVeA2y0CAm7XEc51gd8HGgIChYHEOo5vFKW+htsVZc/wJst2nEw9fPLdAI7w4AqHl6UHiuj6e4a0NM8by1lEZdtMzTME63WznjV7yorGqk507dgBRkmClWnC8QP8PX2EwewxBH1fSng0yXANx8XSEo0ZtovgOvwbOsR1HoI4QhyusbAv8NXT93H0/C5m5oyhsjjCxerKwU9Px+j1X+N+/wwPjidwWPm2QJ0ctoAxkx7h0l7i8csf8WT4C32DDEN4vg+HQh+OJnjx8jWOhyNczJeQSmJluQOsuwzDeA0p/QZAWzqYzUxcGQK2KeBYLnyyiSgdyxbUqqp2iCAKdwyr66rfAAwpFYfhWUJgRabCUUCS1fVgGQ7BHSwWFsyVaOYWL9tsM9TlXpc7QMmQTYa1dByyJLAvoNmXEErcvCgIaVGM+ZUO3VrC8wII10dKwKnu4ds/3yBJi32VDYb6xc//4o/BlE0gwJe/DfHrszeQ9FXyVX51e4F7g49w7/hjmMJsxK7GzArx4Td/USnZW0AFKcjwfv8cH3z9DDrD7vVHeO+zhzh6dIYkYb4k2VkX+H7wKX44+RxLW2MuY373FXL2gYD5R1fYNm/T9QVOR2No1FkUS/QHZ3h4MkHMAkhq0fUlVoYNy/GbtEimIu/kr+4KO0kzrFTyPQ8eD1oM0/JcFits5OFzrTWPIleCD5N9l6l3Ve6IsiT9gjem/O7yrGD7SgiWIE3zt2vUXNfqd77ng27TnpBOBG1iYEWJNDa3EAebw87R+Q3c+gtofceUOP3nHJORhvNXs8Yi/zC8+rbm0G097YZnB1guTBjaVWMrzeRXsj44d9v4H80RjwPyAdNFAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Decoupled\"\n        title=\"Decoupled\"\n        src=\"/static/1a67f0249b4bc12727b7b34cd7c507cc/1dda8/decoupled.png\"\n        srcset=\"/static/1a67f0249b4bc12727b7b34cd7c507cc/27f03/decoupled.png 173w,\n/static/1a67f0249b4bc12727b7b34cd7c507cc/376d0/decoupled.png 345w,\n/static/1a67f0249b4bc12727b7b34cd7c507cc/1dda8/decoupled.png 690w,\n/static/1a67f0249b4bc12727b7b34cd7c507cc/c79eb/decoupled.png 715w\"\n        sizes=\"(max-width: 690px) 100vw, 690px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span> <a href=\"https://www.amazon.com/System-Design-Interview-insiders-Second/dp/B08CMF2CQF\">Image Credit</a></p>\n<p>Having said that, here's a summary of techniques we've talked about:</p>\n<ul>\n<li>Keep web tier stateless</li>\n<li>Build redundancy at every tier</li>\n<li>Cache data as much as you can</li>\n<li>Support multiple data centers</li>\n<li>Host static assets in CDN</li>\n<li>Scale your data tier by sharding</li>\n<li>Split tiers into individual services</li>\n<li>Monitor your system and use automation tools</li>\n</ul>\n<h3 id=\"useful-architectures\"><a href=\"#useful-architectures\" aria-label=\"useful architectures permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Useful architectures</h3>\n<ul>\n<li><a href=\"https://docs.aws.amazon.com/whitepapers/latest/best-practices-wordpress/reference-architecture.html\">WordPress on AWS</a></li>\n<li><a href=\"https://netflixtechblog.com/active-active-for-multi-regional-resiliency-c47719f6685b\">Netflix active-active</a></li>\n</ul>","timeToRead":37,"excerpt":"Intro DNS Types of data Types of data - Relational Model Types of data - Document Model Types of data - Relation vs Document Model Types of…","frontmatter":{"title":"Data System Design","date":"2020-05-14T00:00:00.000Z","categories":["System Design"],"extract":"Data system design","thumbnail":"/post-images/system-design.png","tags":["Data system design"]},"fields":{"slug":"/data-system-design","date":"May 14, 2020"}}},"pageContext":{"slug":"/data-system-design","nexttitle":"Quick Sort","nextslug":"/quick-sort","prevtitle":"TODO Problems","prevslug":"/todo-problems"}}}