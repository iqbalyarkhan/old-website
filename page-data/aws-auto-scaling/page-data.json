{"componentChunkName":"component---src-templates-post-js","path":"/aws-auto-scaling","result":{"data":{"markdownRemark":{"html":"<h3 id=\"table-of-contents\" style=\"position:relative;\"><a href=\"#table-of-contents\" aria-label=\"table of contents permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Table of Contents</h3>\n<ul>\n<li><a href=\"#what-is-scaling\">What is Scaling?</a></li>\n<li><a href=\"#vertical-scaling\">Vertical Scaling</a></li>\n<li><a href=\"#horizontal-scaling\">Horizontal Scaling</a></li>\n<li><a href=\"#3-ws-of-scaling\">3 Ws of Scaling</a></li>\n<li><a href=\"#what-are-we-scaling-with\">What are we scaling with?</a>\n<ul>\n<li><a href=\"#launch-template\">Launch Template</a></li>\n<li><a href=\"#requirements-for-launch-templates\">Requirements for Launch Templates</a></li>\n<li><a href=\"#creating-launch-templates\">Creating Launch Templates</a></li>\n</ul>\n</li>\n<li><a href=\"#where-are-we-going-to-scale\">Where are we going to scale?!</a>\n<ul>\n<li><a href=\"#reqs-for-asgs\">Reqs for ASGs</a></li>\n<li><a href=\"#restrictions-for-auto-scaling\">Restrictions for Auto scaling</a></li>\n<li><a href=\"#asg-demo\">ASG demo</a></li>\n</ul>\n</li>\n<li><a href=\"#when-are-we-going-to-scale\">When are we going to scale?</a></li>\n<li><a href=\"#scaling-policies\">Scaling Policies</a>\n<ul>\n<li><a href=\"#rules\">Rules</a></li>\n<li><a href=\"#change-1\">Change 1</a></li>\n<li><a href=\"#change-2\">Change 2</a></li>\n<li><a href=\"#change-3\">Change 3</a></li>\n<li><a href=\"#change-4\">Change 4</a></li>\n<li><a href=\"#change-5\">Change 5</a></li>\n<li><a href=\"#change-6\">Change 6</a></li>\n<li><a href=\"#reactive-scaling\">Reactive Scaling</a></li>\n<li><a href=\"#scheduled-scaling\">Scheduled Scaling</a></li>\n<li><a href=\"#predictive-scaling\">Predictive Scaling</a></li>\n<li><a href=\"#steady-state-asg\">Steady state ASG</a></li>\n</ul>\n</li>\n<li><a href=\"#scaling-relational-dbs\">Scaling Relational DBs</a>\n<ul>\n<li><a href=\"#rds-scaling\">RDS Scaling</a></li>\n</ul>\n</li>\n<li><a href=\"#scaling-non-relational-dbs\">Scaling Non-Relational DBs</a>\n<ul>\n<li><a href=\"#provisioned\">Provisioned</a></li>\n<li><a href=\"#on-demand\">On-Demand</a></li>\n<li><a href=\"#dynamodb-scaling-demo\">DynamoDB Scaling Demo</a></li>\n<li><a href=\"#conclusion\">Conclusion</a></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"what-is-scaling\" style=\"position:relative;\"><a href=\"#what-is-scaling\" aria-label=\"what is scaling permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>What is Scaling?</h2>\n<p>Scaling, as the name implies, means to increase your resources to handle extra load. There're 2 types of scaling: vertical and horizontal</p>\n<h2 id=\"vertical-scaling\" style=\"position:relative;\"><a href=\"#vertical-scaling\" aria-label=\"vertical scaling permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Vertical Scaling</h2>\n<p>This is where you increase the performance by improving the state of your current machines by adding more RAM etc</p>\n<h2 id=\"horizontal-scaling\" style=\"position:relative;\"><a href=\"#horizontal-scaling\" aria-label=\"horizontal scaling permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Horizontal Scaling</h2>\n<p>This is where you increase performance by adding more machines.</p>\n<h2 id=\"3-ws-of-scaling\" style=\"position:relative;\"><a href=\"#3-ws-of-scaling\" aria-label=\"3 ws of scaling permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3 Ws of Scaling</h2>\n<p>Whenever we're determining the scope of our scaling, it is important to answer the 3 Ws:</p>\n<ul>\n<li>\n<p><strong>What do we scale with?</strong> We have to decide what sort of resource we're going to scale. Are we scaling the EC2 instance? The DB? How do we spin up that instance? And how do we define the template?</p>\n</li>\n<li>\n<p><strong>Where do we scale?</strong> We decide where do we scale in our architecture? Where in the VPC? What LBs should be used?</p>\n</li>\n<li>\n<p><strong>When do we scale?</strong> When do we actually need to scale? When does it make sense to spin up more or take something away. Usually it is CloudWatch that helps guide us.</p>\n</li>\n</ul>\n<h2 id=\"what-are-we-scaling-with\" style=\"position:relative;\"><a href=\"#what-are-we-scaling-with\" aria-label=\"what are we scaling with permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>What are we scaling with?</h2>\n<p>When we're trying to answer what to scale with when considering an EC2 instance, we do so by using the launch template</p>\n<h3 id=\"launch-template\" style=\"position:relative;\"><a href=\"#launch-template\" aria-label=\"launch template permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Launch Template</h3>\n<p>A launch template specifies all the needed settings that go into building out an EC2 instance. It is a collection of settings that you can configure so you don't have to use the EC2 wizard over and over (similar to what we've been doing for previous EC2 demos!). We can use a template to save our settings! Launch configs are similar to templates but do less than what a template can accomplish! Just use launch templates. Templates:</p>\n<ul>\n<li>Are for more than just autoscaling (demo will clarify this)</li>\n<li>Support versioning</li>\n<li>Provide you with more granularity</li>\n<li><strong>AWS Recommended!</strong></li>\n</ul>\n<h3 id=\"requirements-for-launch-templates\" style=\"position:relative;\"><a href=\"#requirements-for-launch-templates\" aria-label=\"requirements for launch templates permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Requirements for Launch Templates</h3>\n<ul>\n<li>An AMI is required</li>\n<li>EC2 instance size is required</li>\n<li>Security groups are required</li>\n<li>Networking information is required</li>\n</ul>\n<h3 id=\"creating-launch-templates\" style=\"position:relative;\"><a href=\"#creating-launch-templates\" aria-label=\"creating launch templates permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Creating Launch Templates</h3>\n<p>Let's look at a demo for launch templates. Remember, our end goal is to use these with an auto-scaling group (we'll talk more about those later):</p>\n<ul>\n<li>EC2 -> Launch templates -> Create Launch Template</li>\n<li>Provide a name and description</li>\n<li>Click the check mark for <code class=\"language-cpptext\">Auto Scaling guidance</code>. If selected, this template can then be used for an auto-scaling group as well.</li>\n<li>Provide the AMI and Instance Type</li>\n<li>If Key pair is NOT provided, you can't provided it while setting up the ASG. So do provide a key pair</li>\n<li>Leave the VPC section blank. If the VPC is specified in the template, that launch template cannot be used in an ASG.</li>\n<li>Leave everything as is and create template.</li>\n<li>Launch EC2 from template\n<ul>\n<li>Provide the VPC, SG and leave everything as is</li>\n<li>Inspect the new instance</li>\n</ul>\n</li>\n</ul>\n<!-- copy and paste. Modify height and width if desired. -->\n<div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 52.92479108635098%; position: relative; height: 0; overflow: hidden; \" > <iframe class=\"embeddedObject shadow resizable\" name=\"embedded_content\" scrolling=\"no\" frameborder=\"0\" type=\"text/html\" style=\"overflow:hidden; position: absolute; top: 0; left: 0; width: 100%; height: 100%; \" src=\"https://www.screencast.com/users/IqbalKhan8502/folders/Capture/media/f639ed92-8734-4813-ae12-c7613bcd684f/embed\" webkitallowfullscreen=\"\" mozallowfullscreen=\"\" allowfullscreen=\"\"></iframe> </div>\n<h2 id=\"where-are-we-going-to-scale\" style=\"position:relative;\"><a href=\"#where-are-we-going-to-scale\" aria-label=\"where are we going to scale permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Where are we going to scale?!</h2>\n<p>Auto scaling groups or ASG is a collection of EC2 instances that are treated as a collective group for purposes of scaling and management. ASG determines when the instances come online, where they're created and where they're destroyed.</p>\n<ul>\n<li>ASGs are vital to creating a highly available application.</li>\n<li>We should consider spreading out resources across AZs</li>\n<li>We should utilize load balancers (more on this below)</li>\n</ul>\n<h3 id=\"reqs-for-asgs\" style=\"position:relative;\"><a href=\"#reqs-for-asgs\" aria-label=\"reqs for asgs permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reqs for ASGs</h3>\n<p>You first need a <strong>launch template</strong> for ASGs. Launch templates tell ASG the settings required to created our EC2 architecture</p>\n<p>Next, you need a <strong>networking space and purchasing options</strong>. This is the reason why we don't choose this when creating the launch template. We should also use at-least 2 AZs for high availability.</p>\n<p><strong>ELB configuration</strong> is also needed. The ELB sits in front of the ASG and as instances come online, they're registered with the ELB. They're de-registered as we remove instances. This happens automatically if we choose the ASG to interact with our ELB. ASG can also use the health check of ELB to make sure that the group count stays up to the required standard.</p>\n<p>Next, we need to set <strong>scaling policies</strong>: these are the min, max and desired capacity needs that ensure we don't have too many or too little resources.</p>\n<p><strong>Notifications</strong> via SNS are also required so that we're notified when scaling event occurs.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 690px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 46.82080924855491%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAACF0lEQVQoz3WQSU8TARiG52wrdF+mnaWlpbROmSmUodW4U0FBZCulCtLpNAWhrSxCOWpi/AXeTbgaTyQevZp4Mp5MvOkPeUybwIHo4cmXb3newye4nHP0GHTMIgZXEAPLyGIZr3sJIzqFGSvhdC4wpjwgr9zH61pEiVSQwmWioRUkcRX31ccMXJnt5wh+9zJK5CnJ2CYTYzuMGy+4UeggyxZftof41lERhHk+20m+Hygo0Q2uFzoUzTaT+RZFs0MqYRH0rOAdWEQIusqE3GWkYJWov0pCqZFJ2ng9m+SlGerTG+zuf2B96jlFdRqfb5NUzOrfpRMNkmoNVVxHClTpZQkBdxW/aw3vQAXR/4xU3CYStihp89xOzNB984mfv/9w/PojN+MzlLQFpEid4ZjNkGJduL7BCkFPFSGhNtC1FpnhbSZye0zdOWEkfcBZI8uPvQizc+94f/qVh4/e9vuzpo6e63LvVpeieYihtTGybXStjSzWENRwnWxqFz3dQs+00VI7xOUtzHiZQrLChLrE6Vq2X3v9ZGKV3OgBZm6f7EiL0ZEWOa2DoXWQQxZC1G8R8dWIXmAh+XtPruNwNnliLPLrRGXeWMLhaBLy1FHDNmrIRgrU++45PU9QQjaXkYN1hpUm6dgWZu6Iu8VjCvkumfh2f97bn3PZE+Swzb/Qr+2RNw6ZHD/CHO8FHmGOvWI08xJFbPA/7y8k4TSWBCEHkgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"ASG-Reqs\"\n        title=\"ASG-Reqs\"\n        src=\"/static/069febae5bd954dc09706d98288f5386/1e043/asg-reqs.png\"\n        srcset=\"/static/069febae5bd954dc09706d98288f5386/991de/asg-reqs.png 173w,\n/static/069febae5bd954dc09706d98288f5386/e4d6b/asg-reqs.png 345w,\n/static/069febae5bd954dc09706d98288f5386/1e043/asg-reqs.png 690w,\n/static/069febae5bd954dc09706d98288f5386/e3189/asg-reqs.png 1035w,\n/static/069febae5bd954dc09706d98288f5386/b1001/asg-reqs.png 1380w,\n/static/069febae5bd954dc09706d98288f5386/da994/asg-reqs.png 1487w\"\n        sizes=\"(max-width: 690px) 100vw, 690px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span><a href=\"https://acloudguru.com\">Image Credit: acloudguru.com</a></p>\n<h3 id=\"restrictions-for-auto-scaling\" style=\"position:relative;\"><a href=\"#restrictions-for-auto-scaling\" aria-label=\"restrictions for auto scaling permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Restrictions for Auto scaling</h3>\n<p>We need to set the <strong>minimum</strong> or the lowest number of EC2 instances that you'll ever have onilne. You won't dip below this. We want to set this to 2 since we want high availability with instances in multiple AZs.</p>\n<p>We need to set the <strong>maximum</strong> or the highest number of EC2 instances that we'll ever provision. We'll never go above this.</p>\n<p>We need to set the <strong>desired</strong> or how many instances do you want right now?? NOT the average! But how much you want right now?</p>\n<p><code class=\"language-cpptext\">minimum &lt;= desired &lt;= maximum</code></p>\n<h3 id=\"asg-demo\" style=\"position:relative;\"><a href=\"#asg-demo\" aria-label=\"asg demo permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ASG demo</h3>\n<p>Let's continue where we left off for launch templates. Our template is created and we have an EC2 instance running that was launched using that template.</p>\n<ul>\n<li>Open EC2, find ASG and click create ASG</li>\n<li>Provide a name for the ASG and provide an existing template</li>\n<li>Choose a VPC and <strong>select 2 subnets</strong> for higher availability</li>\n<li>For config settings, you can mix and match EC2 capacity: You can choose on-demand and spot capacity</li>\n<li>Choose adhere to launch template</li>\n<li>For now, choose no LB</li>\n<li>For health checks, stick with EC2 but note you can choose ELB health check as we discussed earlier</li>\n<li>Set min to 2, max to 10 and desired to 2</li>\n<li>Leave scaling policies as None (will explore those later)</li>\n<li>Skip notifications and add a sample tag</li>\n<li>Create ASG</li>\n</ul>\n<p>Initially, instances tab will show 0 and desired will show 2. Now if you click on instance management, you'll see that 2 are in pending state. If you update the desired capacity to say 5, ASG will add 3 more instances (2 running add 3 more to take to desired count). If now again you reduce desired to 2, ASG will remove 3 instances (5 running remove 3 to take to desired count of 2).</p>\n<!-- copy and paste. Modify height and width if desired. -->\n<div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 53.13807531380753%; position: relative; height: 0; overflow: hidden; \" > <iframe class=\"embeddedObject shadow resizable\" name=\"embedded_content\" scrolling=\"no\" frameborder=\"0\" type=\"text/html\" style=\"overflow:hidden; position: absolute; top: 0; left: 0; width: 100%; height: 100%; \" src=\"https://www.screencast.com/users/IqbalKhan8502/folders/Capture/media/0efb9b7b-cbc9-4e0b-be7c-f2edf3f58f6c/embed\" webkitallowfullscreen=\"\" mozallowfullscreen=\"\" allowfullscreen=\"\"></iframe> </div>\n<h2 id=\"when-are-we-going-to-scale\" style=\"position:relative;\"><a href=\"#when-are-we-going-to-scale\" aria-label=\"when are we going to scale permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>When are we going to scale?</h2>\n<p>Now we'll answer the questin of when do we scale using our <strong>scaling policies</strong>.</p>\n<h2 id=\"scaling-policies\" style=\"position:relative;\"><a href=\"#scaling-policies\" aria-label=\"scaling policies permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Scaling Policies</h2>\n<p>Say we have this scenario: We have determined through trial and error that our memory utilization can be broken down as follows:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 690px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 67.6300578034682%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAADIUlEQVQ4y1WQ224bVRSG5xFo8Glm9syes2dsx6nbtBQlpE2kBsQNtDnIcTz2xPb4mFPVhlQI1BZ4lD4BV1whuECIp/rQ7FZIXPzaa+211rcOmlXrUsioHGPXegTGAM84xdVPiERGYKS4eg9ZPVE5RuUIvXxEee2A0ifPqZUO/1O1dIhmG6c45ilC7xLbE3YaP7LbesPT9s/sJD+w23zLXvMtj6Ib9PKhguqlIwKnRyPqUysfU75zQGXtgOraIVoSjnCtPr4c4skUaXWxRRfLOMbUD7GtLo59gif7eHaKK/qEbsbO1iX7u1f4wRJLTKne+RZRO0GL3DOqnx4jaqdIc4ArhjjmAFHrYVZ62MYAxxxi6X30clflSpGy/eicVjxAr2b49Ru86BxLTtAaYa5gRYFtpirZtQYEckgoz5QckX6IGylmtYcvM+5tzImDAcLMCeLXBM1bLDtHi8MxtfIJZrWP+FhkGSnSLNYb4NkZgTzDtYYIPcWonCp/d+cF9zcmOM4K6V5QXTtSMW1z/ZrQztUEamVr+D8VQL+Y1B3jiKFqXNh3WzNCb4gtxuiVFL3cQ6/00C6+/o3xzq9UKgc4ZjHJGb4c4ZgZ0hjiiAxHnBE4Y3w5xtJTZT/efsG99hRpTXHlVN1amhna62d/cfX0D0ql5wpYfBaAD6BMNfDskYJEXq6gzfqczx9c0Y4nxPFLmq1bdWfXHqHdfPMnl/u/I6weib+g7s+IgzlJuCQJC39K3Zuqt/CTYMl6cs7+3ndsPTwn8M5Z77yjtfkTYf0K7ftn//Dyq78xzT51uSB05kTekshdELpzfDtXCp0ZkTvHERPiYEFnfUnkZbjOirB+i6gNsPQhWvble9K99zSSGRuNSzaal2qCQo1oQbO+YD1Zcb99TTtZkYQzknDOk+1XPOgscb1rPPcSqzbAlzlaszEnCiY87FxT93M67QviIKfTWhD7YzY3Vgq09dkrdbtmPP94lmL9BZ41Q5oTHGOMKyZovpzjiymuWaw2w5czEnfJk+QXHsfv+CJ5Q8Nb4Vk5tj7CrGZY+kjlqxorV/WemSv9C0we1iXsKyU+AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Scaling-Thresholds\"\n        title=\"Scaling-Thresholds\"\n        src=\"/static/f87b8a3c095c5a01a940f75ec9e99a66/1e043/Scaling-in-vs-out.png\"\n        srcset=\"/static/f87b8a3c095c5a01a940f75ec9e99a66/991de/Scaling-in-vs-out.png 173w,\n/static/f87b8a3c095c5a01a940f75ec9e99a66/e4d6b/Scaling-in-vs-out.png 345w,\n/static/f87b8a3c095c5a01a940f75ec9e99a66/1e043/Scaling-in-vs-out.png 690w,\n/static/f87b8a3c095c5a01a940f75ec9e99a66/7608e/Scaling-in-vs-out.png 735w\"\n        sizes=\"(max-width: 690px) 100vw, 690px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span><a href=\"https://acloudguru.com\">Image Credit: acloudguru.com</a></p>\n<h3 id=\"rules\" style=\"position:relative;\"><a href=\"#rules\" aria-label=\"rules permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Rules</h3>\n<p>We notice from the image above that when our best memory utilization occurs when utilization is between 40% and 60%. We want to be in this range!</p>\n<p>If we hit the 40% mark, it is best to scale in. For scaling in, we'll terminate 10 instances when memory is between 40% and 20%. We'll terminate 15 instances when memory is between 20% and 0%.</p>\n<p>If we hit 60% mark, it is best to scale out. For scaling out, we'll add 10 instances when memory is between 60% and 80%. We'll add 15 instances when memory is between 80% and 100%.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 633px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 80.34682080924856%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAADZ0lEQVQ4y1WTW1McRRhA5zlVBoFd5tpz3zsCG2EhpAC5BaUSIDHZS9id2dnZmSWiVsTgg1U++qL+UH+CVT4caxqk9OFUX6e/833TrSzOXbDw+ILS/CsW584lC4/PqWonrJj7NI19atoBTeOAlnnIin1MRT9lYe7iP/vPmP/kjOIsxTa6eKKLuvg1Qh8gtB5q6S1HrRPe7+6QbO8Sbe3S3Tig1zkg39lhv3GCWurKvULvoZfe4Jg9ibK5PuOr4xuqXkSjMiV0x4RujCNihDVGWDG2KIiwxQjTGOGISO4JnH+JOPziA+vtHGWp1Gdx/i21MMVQL1FLffTy4J4+WqmHtthDXSiy6D2wdN+W57tY2iXN6vjOUF8aopbf0azPCP0pnj2+Q8T4doxrjR7wRIRrRbLv3M855lDOH+/f0HkyKw4srN5RDTN0dYhaGqCVL1HLQ7T7taWFvjQpWFoozPoSrTSQrSsiAmeEuthF0cvFBwOatZzQTaTBneEE107x3AzfzQjdlNCdUPEmVP30f9SDKa/Pf2G78y2KpY0w1SGt+hXCSnGsMb6d4IoE2xwj9DGWkcg1V6T4dkrgTPDtCa4o6hZTD3NCZ4xRHqAETopnp2ysXrPXTvisltOoXNGozKiFuaTiZ3jOVNqG/oxqMJNzvjPBEwkVL+Xl6c+sLecogZ3w6XzMcH/EX7/7nKx1UbUU14oRevRAkYmlRVh6gjCKTKY41gRTi2RGq60ZvohRlmsZW09/ZLg/4O/fBCerbygvTfDMWEaXqZljbCOWfTm2CrPCcIbv5tL4cO+WlcYMpeZPWO98JDq8hD9MTttdVDXDFwmhmxE4GZ5I8awE3ynqN5V19O2izfDsnEbtOzaefKDqT1FsPebRoyG9vZg/f13mxUaEY7+nGc6o+hlVP6cW5NSDjGZRVz+jHl7JYLWill5Os3bN9tatvA1KUKhbGY0g42j7mkaYs7v9Uf6Up50faK9c06h9w1r7Bte9orN5i+9MOdz7SV6ljfb3LNevWGldE3gzlMDKCUSOZxavJMMxU2kl9ITQmWJoCc/qr+hvfsnz1nPOPn9JaPSkjaXG2MWV0sfo5aI/RSnsfGt6d6CZEoipHIdOTlAEsDLaQZ+j5gt262c8q5xTFUMMNcE2JjKwY0woxHwz4x+OuQ/De/V5fgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Instance-Count\"\n        title=\"Instance-Count\"\n        src=\"/static/235444fcf3b61adf81f0706f5d589a0d/bce72/Instance-count.png\"\n        srcset=\"/static/235444fcf3b61adf81f0706f5d589a0d/991de/Instance-count.png 173w,\n/static/235444fcf3b61adf81f0706f5d589a0d/e4d6b/Instance-count.png 345w,\n/static/235444fcf3b61adf81f0706f5d589a0d/bce72/Instance-count.png 633w\"\n        sizes=\"(max-width: 633px) 100vw, 633px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span><a href=\"https://acloudguru.com\">Image Credit: acloudguru.com</a></p>\n<p>From the image above, we can see that our min count is 10,max is 50 and we're currently using 20 instances.</p>\n<h3 id=\"change-1\" style=\"position:relative;\"><a href=\"#change-1\" aria-label=\"change 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Change 1</h3>\n<p><strong>Say our average memory utilization (MU) moves UP from 60% to 70%. Currently we have 20 instances running</strong>.</p>\n<p>Using the rules we described above, we'll add 10 instances when memory is between 60% and 80%. So, we'll add 10 instances to the existing 20 instances to go to a total of 30 instances. One thing to note here is that these instances will NOT immediately come online. You'd have setup taking place, packages being installed. This is called <strong>warmup period</strong>. ASG is aware that these instances are not ready yet so they'll not be added behind the ELB immediately. We can set a window where we can configure this warm-up period of waiting for the instances to come online.</p>\n<h3 id=\"change-2\" style=\"position:relative;\"><a href=\"#change-2\" aria-label=\"change 2 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Change 2</h3>\n<p><strong>Say our average memory utilization (MU) moves UP from 70% to 75%. Currently we have 20 instances running and 10 are in warmup</strong>.</p>\n<p>Let's say, while we're in the warmup period we get another burst of traffic and our MU goes up a notch to 75%. We're still in that 60% to 80% range. Do we add another 10 instances? NO! Auto scaling is smart enough to understand that the load is still within that threshold and we've got 10 in the warmup window and will come live soon! So we do NOTHING!</p>\n<h3 id=\"change-3\" style=\"position:relative;\"><a href=\"#change-3\" aria-label=\"change 3 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Change 3</h3>\n<p><strong>Say our average memory utilization (MU) moves UP from 75% to 90%. Currently we have 20 instances running and 10 are in warmup</strong>.</p>\n<p>Now what do we do? The rule says add 15 instance between 80% and 100%. Do we add 15 more instances? NO! we add 5! Why 5 and not 15? Because we already have 10 coming in from warmup period and we need to get to 15. So we need to add 5 more!</p>\n<p>Let's say now that the warmup period is over and our 35 instances are up and running!</p>\n<h3 id=\"change-4\" style=\"position:relative;\"><a href=\"#change-4\" aria-label=\"change 4 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Change 4</h3>\n<p><strong>Say our average memory utilization (MU) moves DOWN from 90% to 45%. Currently we have 35 instances running</strong>.</p>\n<p>This drop in MU happened because the warmup period expired and we have 35 instances that are running. We're currently in that range we like the most! 40% to 60% memory utilization. We do nothing and leave the 35 instances up.</p>\n<h3 id=\"change-5\" style=\"position:relative;\"><a href=\"#change-5\" aria-label=\"change 5 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Change 5</h3>\n<p><strong>Our MU goes from 45% to 30%. Currently we have 35 instances running</strong>.</p>\n<p>What do we do? Rule says termiante 10 instances. That's what we'll do: go down from 35 to 25 instances. Terminating instances is faster than getting them online. Termination is instantaneous.</p>\n<h3 id=\"change-6\" style=\"position:relative;\"><a href=\"#change-6\" aria-label=\"change 6 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Change 6</h3>\n<p><strong>Our MU goes from 30% to 10%. Currently we have 25 instances running</strong>.</p>\n<p>Rule says terminate 15 instances in this window. That's what we'll do! We'll remove 15 to go down to 10 instances.</p>\n<p>All actions described above take place automatically using our AS policies. We prevent thrashing (hearbeat like instance counts!) using warmup and cool down periods. We were reactively scaling to our load.</p>\n<h3 id=\"reactive-scaling\" style=\"position:relative;\"><a href=\"#reactive-scaling\" aria-label=\"reactive scaling permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reactive Scaling</h3>\n<p>Reactive scaling is when you're playing catch up. Once the load is there, you measure it and then determine if you need to create more resources.</p>\n<h3 id=\"scheduled-scaling\" style=\"position:relative;\"><a href=\"#scheduled-scaling\" aria-label=\"scheduled scaling permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Scheduled Scaling</h3>\n<p>If you have a predictable workload, create a scaling event to get your resources ready to go before they're actually needed.</p>\n<h3 id=\"predictive-scaling\" style=\"position:relative;\"><a href=\"#predictive-scaling\" aria-label=\"predictive scaling permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Predictive Scaling</h3>\n<p>AWS uses ML algos to determine when you'll need to scale. They are re-evaluated every 24 hours to create a forecast for the next 48.</p>\n<h3 id=\"steady-state-asg\" style=\"position:relative;\"><a href=\"#steady-state-asg\" aria-label=\"steady state asg permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Steady state ASG</h3>\n<p>If you have desired capacity, min capacity and max capacity ALL as the same value that equals 1 and if your instance terminates, it'll be re-launched in a new AZ! This is useful when you can't duplicate your LEGACY code base to multiple EC2s, this will allow you to be highly available.</p>\n<h2 id=\"scaling-relational-dbs\" style=\"position:relative;\"><a href=\"#scaling-relational-dbs\" aria-label=\"scaling relational dbs permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Scaling Relational DBs</h2>\n<p>There're 4 main ways to scale relational DBs:</p>\n<ul>\n<li>vertical scaling</li>\n<li>scaling storage</li>\n<li>creating read replicas (for read heavy workloads)</li>\n<li>Aurora serverless!</li>\n</ul>\n<h3 id=\"rds-scaling\" style=\"position:relative;\"><a href=\"#rds-scaling\" aria-label=\"rds scaling permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>RDS Scaling</h3>\n<ul>\n<li>Create MySQL Aurora instance</li>\n<li>Once created, go to Databases inside RDS and click on modify</li>\n<li>We can change the DB instance class to something else to scale vertically.</li>\n<li>Now, to scale horizontally using read replicas, go ahead and create the Reader first</li>\n<li>Open the reader that you created and you can edit it to create a cross region read replica</li>\n</ul>\n<h2 id=\"scaling-non-relational-dbs\" style=\"position:relative;\"><a href=\"#scaling-non-relational-dbs\" aria-label=\"scaling non relational dbs permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Scaling Non-Relational DBs</h2>\n<p>There're 2 main ways to handle capacity within DynamoDB:</p>\n<ul>\n<li>provisioned</li>\n<li>on-demand</li>\n</ul>\n<h3 id=\"provisioned\" style=\"position:relative;\"><a href=\"#provisioned\" aria-label=\"provisioned permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Provisioned</h3>\n<p>You want to use provisioned instances for predictable workloads. With this model, you set how many reads and writes you need. You can also set auto-scaling where you set a min units, max units and \"target utilization\" instead of desired capacity. As soon as your utilization hits that threshold, DynamoDB will start to scale automatically. There's also an initial provisioned units that need to be set that'll be between min and max units. You can set these for both read and writes.</p>\n<p>To set upper and lower bounds for scaling, you need to review past usage. Provisioned is CHEAPER than on-demand.</p>\n<h3 id=\"on-demand\" style=\"position:relative;\"><a href=\"#on-demand\" aria-label=\"on demand permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>On-Demand</h3>\n<p>You want to use on-demand for sporadic workload. To choose this model, all you need to do is simply select on-demand! You pay per read and write which is not as cost-effective as provisioned.</p>\n<h3 id=\"dynamodb-scaling-demo\" style=\"position:relative;\"><a href=\"#dynamodb-scaling-demo\" aria-label=\"dynamodb scaling demo permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>DynamoDB Scaling Demo</h3>\n<ul>\n<li>We'll create a table and choose customized settings.</li>\n<li>In that menu, you'll be asked for Read/Write capacity settings.</li>\n<li>For on-demand, all we need to do is choose on-demand! That's it for On-demand!!! Amazon handles everything for us</li>\n<li>Once created, you can see that read capacity and write capacity mode is on-demand</li>\n<li>You can then change on-demand to provisioned as well! BUT you can't switch back to on-demand for 24 hours! We'll do that to see provisioned in action</li>\n<li>Open the table, click Actions, Edit capacity, choose provisioned</li>\n<li>Keep auto-scaling on.</li>\n<li>Choose min, max, and target utilization</li>\n</ul>\n<!-- copy and paste. Modify height and width if desired. -->\n<div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 53.13807531380753%; position: relative; height: 0; overflow: hidden; \" > <iframe class=\"embeddedObject shadow resizable\" name=\"embedded_content\" scrolling=\"no\" frameborder=\"0\" type=\"text/html\" style=\"overflow:hidden; position: absolute; top: 0; left: 0; width: 100%; height: 100%; \" src=\"https://www.screencast.com/users/IqbalKhan8502/folders/Capture/media/abd9bb45-8b97-422e-9ee7-2c0153910d51/embed\" webkitallowfullscreen=\"\" mozallowfullscreen=\"\" allowfullscreen=\"\"></iframe> </div>\n<h3 id=\"conclusion\" style=\"position:relative;\"><a href=\"#conclusion\" aria-label=\"conclusion permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Conclusion</h3>\n<ul>\n<li>You'll be asked about cost</li>\n<li>For predictable, use provisioned. Otherwise, use on-demand</li>\n</ul>","timeToRead":12,"excerpt":"Table of Contents What is Scaling? Vertical Scaling Horizontal Scaling 3 Ws of Scaling What are we scaling with? Launch Template…","frontmatter":{"title":"AWS - Auto Scaling","date":"2021-12-30T00:00:00.000Z","categories":["AWS"],"extract":"Notes for AWS Auto Scaling","thumbnail":"/post-images/aws-scaling.png","tags":["blog","AWS"]},"fields":{"slug":"/aws-auto-scaling","date":"December 30, 2021"}}},"pageContext":{"slug":"/aws-auto-scaling","nexttitle":"AWS - CloudWatch & CloudTrail","nextslug":"/aws-cloud-watch-cloud-trail","prevtitle":"AWS - Decoupled Workflows","prevslug":"/aws-decoupled-workflows"}},"staticQueryHashes":["3969716136"]}